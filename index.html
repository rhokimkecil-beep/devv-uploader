<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DEV UPLOADER â€” Premium Asset Platform</title>
<meta name="description" content="Platform upload asset Roblox premium">
<meta name="theme-color" content="#020408">
<link rel="manifest" href="/manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
:root{--void:#020408;--deep:#060d18;--glass:rgba(255,255,255,0.03);--rim:rgba(255,255,255,0.07);--rim2:rgba(255,255,255,0.12);--gold:#c9a84c;--gold2:#f0d080;--teal:#00e5c8;--red:#ff4466;--red-dim:rgba(255,68,102,0.15);--green:#00e5a0;--purple:#a78bfa;--text:#dde6f0;--muted:#4a6080;--muted2:#7a90a8;}
html{scroll-behavior:smooth;}
body{background:var(--void);color:var(--text);font-family:'Syne',sans-serif;min-height:100vh;overflow-x:hidden;}
#c{position:fixed;inset:0;z-index:0;pointer-events:none;}
.scanlines{position:fixed;inset:0;z-index:1;pointer-events:none;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.03) 2px,rgba(0,0,0,0.03) 4px);}
.vignette{position:fixed;inset:0;z-index:1;pointer-events:none;background:radial-gradient(ellipse at center,transparent 50%,rgba(0,0,0,0.7) 100%);}
/* AUTH */
#screen-auth{position:fixed;inset:0;z-index:50;display:flex;align-items:center;justify-content:center;background:var(--void);padding:20px;overflow-y:auto;}
.auth-box{width:100%;max-width:400px;background:linear-gradient(145deg,rgba(255,255,255,0.05),rgba(255,255,255,0.02));border:1px solid var(--rim);border-radius:28px;padding:36px 28px;position:relative;animation:fadeUp 0.6s ease;}
.auth-box::before{content:'';position:absolute;top:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,rgba(201,168,76,0.8),transparent);}
.auth-logo{font-family:'Bebas Neue',sans-serif;font-size:52px;letter-spacing:8px;text-align:center;display:block;margin-bottom:4px;background:linear-gradient(160deg,#fff 0%,var(--gold2) 30%,var(--gold) 60%,#8b6520 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.auth-tagline{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:4px;color:var(--muted);text-align:center;text-transform:uppercase;margin-bottom:28px;}
.auth-tabs{display:flex;gap:2px;background:rgba(255,255,255,0.03);border:1px solid var(--rim);border-radius:12px;padding:3px;margin-bottom:24px;}
.auth-tab{flex:1;padding:10px;border:none;background:none;color:var(--muted);font-family:'Syne',sans-serif;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;border-radius:10px;transition:all 0.25s;}
.auth-tab.active{background:linear-gradient(135deg,rgba(201,168,76,0.2),rgba(201,168,76,0.05));color:var(--gold2);border:1px solid rgba(201,168,76,0.3);}
.auth-form{display:none;}.auth-form.active{display:block;animation:fadeUp 0.3s ease;}
.auth-field{margin-bottom:14px;}
.auth-label{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--muted);text-transform:uppercase;margin-bottom:6px;display:block;}
.auth-input{width:100%;background:rgba(255,255,255,0.03);border:1px solid var(--rim);border-radius:10px;padding:12px 14px;color:var(--text);font-family:'DM Mono',monospace;font-size:13px;outline:none;transition:all 0.25s;}
.auth-input::placeholder{color:var(--muted);}
.auth-input:focus{border-color:rgba(201,168,76,0.5);box-shadow:0 0 0 3px rgba(201,168,76,0.07);}
.auth-err{background:rgba(255,68,102,0.1);border:1px solid rgba(255,68,102,0.25);border-radius:8px;padding:10px 14px;font-family:'DM Mono',monospace;font-size:11px;color:var(--red);margin-bottom:14px;display:none;}
.btn-auth{width:100%;padding:15px;border:none;border-radius:12px;background:linear-gradient(100deg,#8b6520,var(--gold),var(--gold2),var(--gold),#8b6520);background-size:300% 100%;color:#07050a;font-family:'Bebas Neue',sans-serif;font-size:17px;letter-spacing:3px;cursor:pointer;position:relative;overflow:hidden;transition:all 0.4s;box-shadow:0 4px 25px rgba(201,168,76,0.25);margin-bottom:10px;}
.btn-auth:hover:not(:disabled){background-position:100% 0;}
.btn-auth:disabled{opacity:0.4;cursor:not-allowed;}
.btn-google{width:100%;padding:13px;border:1px solid var(--rim2);border-radius:12px;background:rgba(255,255,255,0.04);color:var(--text);font-family:'Syne',sans-serif;font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;}
.auth-divider{display:flex;align-items:center;gap:10px;margin:14px 0;}
.auth-divider-line{flex:1;height:1px;background:var(--rim);}
.auth-divider-txt{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);}
.ref-hint{background:rgba(0,229,160,0.05);border:1px solid rgba(0,229,160,0.2);border-radius:10px;padding:10px 14px;font-family:'DM Mono',monospace;font-size:10px;color:rgba(0,229,160,0.7);margin-bottom:14px;line-height:1.6;display:none;}
/* APP */
#screen-app{display:none;}#screen-admin{display:none;}
.wrap{position:relative;z-index:2;max-width:520px;margin:0 auto;padding:0 16px 80px;}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 0 8px;}
.topbar-user{display:flex;align-items:center;gap:10px;}
.user-avatar{width:38px;height:38px;border-radius:50%;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.3);display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;transition:all 0.2s;}
.user-avatar:hover{transform:scale(1.1);}
.user-name{font-size:13px;font-weight:700;}.user-email{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);}
.topbar-btns{display:flex;gap:6px;align-items:center;}
.btn-sm{padding:7px 12px;border-radius:8px;font-family:'Syne',sans-serif;font-size:10px;font-weight:700;letter-spacing:1px;cursor:pointer;transition:all 0.2s;border:1px solid;}
.btn-sm-gold{background:rgba(201,168,76,0.1);border-color:rgba(201,168,76,0.3);color:var(--gold);}
.btn-sm-red{background:rgba(255,68,102,0.08);border-color:rgba(255,68,102,0.2);color:var(--red);}
/* NOTIF */
.notif-btn{position:relative;width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,0.03);border:1px solid var(--rim);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;}
.notif-badge{position:absolute;top:-4px;right:-4px;min-width:18px;height:18px;border-radius:9px;background:var(--red);color:#fff;font-family:'DM Mono',monospace;font-size:9px;display:none;align-items:center;justify-content:center;padding:0 3px;}
.notif-panel{position:fixed;top:64px;right:16px;width:300px;max-width:calc(100vw - 32px);background:linear-gradient(145deg,#0d1a2e,#080f1a);border:1px solid rgba(201,168,76,0.2);border-radius:20px;z-index:300;display:none;max-height:65vh;overflow:hidden;flex-direction:column;box-shadow:0 20px 60px rgba(0,0,0,0.6);}
.notif-panel.show{display:flex;animation:fadeUp 0.3s ease;}
.notif-panel-hdr{padding:14px 18px 10px;border-bottom:1px solid var(--rim);display:flex;justify-content:space-between;align-items:center;}
.notif-panel-title{font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:3px;color:var(--gold2);}
.notif-panel-clear{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);cursor:pointer;}
.notif-panel-clear:hover{color:var(--gold);}
.notif-scroll{overflow-y:auto;flex:1;}
.notif-item{display:flex;gap:10px;padding:11px 14px;border-bottom:1px solid rgba(255,255,255,0.04);cursor:pointer;}
.notif-item:hover{background:rgba(255,255,255,0.03);}
.notif-item.unread{background:rgba(201,168,76,0.03);}
.notif-icon{font-size:18px;flex-shrink:0;margin-top:1px;}
.notif-body{flex:1;min-width:0;}
.notif-title{font-size:12px;font-weight:700;margin-bottom:2px;}
.notif-msg{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted2);line-height:1.5;}
.notif-time{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:3px;}
.notif-dot{width:7px;height:7px;border-radius:50%;background:var(--gold);flex-shrink:0;margin-top:4px;}
/* HEADER */
.hdr{padding:18px 0 14px;text-align:center;}
.hdr-eyebrow{display:inline-flex;align-items:center;gap:8px;font-family:'DM Mono',monospace;font-size:9px;letter-spacing:4px;color:var(--gold);text-transform:uppercase;border:1px solid rgba(201,168,76,0.25);border-radius:100px;padding:5px 16px;margin-bottom:12px;background:rgba(201,168,76,0.06);}
.hdr-eyebrow-dot{width:5px;height:5px;border-radius:50%;background:var(--gold);animation:blink 2s infinite;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}
.hdr-logo{font-family:'Bebas Neue',sans-serif;font-size:clamp(50px,15vw,74px);letter-spacing:8px;line-height:0.9;display:block;background:linear-gradient(160deg,#fff 0%,var(--gold2) 30%,var(--gold) 55%,#8b6520 80%,var(--gold) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hdr-tagline{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:5px;color:var(--muted);text-transform:uppercase;margin-top:8px;}
.hdr-rule{display:flex;align-items:center;margin:12px auto 0;width:160px;}
.hdr-rule-line{flex:1;height:1px;background:linear-gradient(90deg,transparent,rgba(201,168,76,0.5),transparent);}
.hdr-rule-gem{width:6px;height:6px;background:var(--gold);transform:rotate(45deg);}
/* COIN BAR */
.coin-bar{display:flex;align-items:center;justify-content:space-between;background:var(--glass);border:1px solid var(--rim);border-radius:16px;padding:11px 16px;margin-bottom:12px;}
.coin-bar-left{display:flex;align-items:center;gap:10px;}
.coin-icon{width:34px;height:34px;border-radius:50%;background:conic-gradient(var(--gold) 0deg,var(--gold2) 90deg,var(--gold) 180deg,#7a5010 270deg,var(--gold) 360deg);display:flex;align-items:center;justify-content:center;position:relative;}
.coin-icon::before{content:'';position:absolute;inset:3px;border-radius:50%;background:var(--deep);}
.coin-icon span{position:relative;z-index:1;font-size:12px;}
.coin-lbl{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--muted);}
.coin-val{font-size:20px;font-weight:800;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.coin-bar-right{display:flex;gap:6px;align-items:center;}
.btn-topup-quick{padding:8px 13px;border:1px solid rgba(201,168,76,0.3);border-radius:10px;background:rgba(201,168,76,0.08);color:var(--gold);font-family:'Syne',sans-serif;font-size:11px;font-weight:700;cursor:pointer;}
.btn-pwa{padding:7px 11px;border:1px solid rgba(0,229,200,0.3);border-radius:10px;background:rgba(0,229,200,0.06);color:var(--teal);font-family:'Syne',sans-serif;font-size:10px;font-weight:700;cursor:pointer;display:none;align-items:center;gap:4px;}
/* TABS */
.tabs-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch;margin-bottom:12px;}
.tabs-wrap::-webkit-scrollbar{height:2px;}
.tabs-wrap::-webkit-scrollbar-thumb{background:rgba(201,168,76,0.3);border-radius:2px;}
.tabs{display:flex;gap:2px;padding:4px;background:var(--glass);border:1px solid var(--rim);border-radius:18px;position:relative;min-width:max-content;}
.tab-slider{position:absolute;top:4px;height:calc(100% - 8px);border-radius:14px;background:linear-gradient(135deg,rgba(201,168,76,0.15),rgba(201,168,76,0.05));border:1px solid rgba(201,168,76,0.3);transition:all 0.4s cubic-bezier(0.4,0,0.2,1);z-index:0;}
.tab-btn{padding:10px 11px;border:none;background:none;color:var(--muted);font-family:'Syne',sans-serif;font-size:8px;font-weight:700;letter-spacing:0.8px;text-transform:uppercase;cursor:pointer;border-radius:14px;transition:color 0.3s;position:relative;z-index:1;display:flex;align-items:center;gap:3px;white-space:nowrap;}
.tab-btn.active{color:var(--gold2);}
.tab-btn .ti{font-size:11px;}
.panel{display:none;animation:fadeUp 0.4s ease both;}.panel.active{display:block;}
/* CARD */
.card{background:linear-gradient(145deg,rgba(255,255,255,0.04),rgba(255,255,255,0.01));border:1px solid var(--rim);border-radius:22px;padding:20px;position:relative;overflow:hidden;margin-bottom:12px;}
.card::before{content:'';position:absolute;top:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,rgba(201,168,76,0.7),transparent);}
.card-glow{position:absolute;top:-60px;right:-60px;width:200px;height:200px;background:radial-gradient(circle,rgba(201,168,76,0.04) 0%,transparent 70%);pointer-events:none;}
.ctitle{display:flex;align-items:center;gap:10px;margin-bottom:16px;}
.ctitle-icon{width:36px;height:36px;border-radius:11px;background:linear-gradient(135deg,rgba(201,168,76,0.15),rgba(201,168,76,0.05));border:1px solid rgba(201,168,76,0.25);display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0;}
.ctitle-text{font-size:12px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;}
.ctitle-sub{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:1px;}
.infobox{background:rgba(0,229,200,0.05);border:1px solid rgba(0,229,200,0.15);border-radius:11px;padding:11px 14px;margin-bottom:14px;font-family:'DM Mono',monospace;font-size:11px;color:rgba(0,229,200,0.7);line-height:1.7;}
.infobox a{color:var(--teal);text-decoration:none;border-bottom:1px solid rgba(0,229,200,0.3);}
.field{margin-bottom:13px;}
.flabel{display:flex;align-items:center;gap:6px;font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2.5px;color:var(--muted);text-transform:uppercase;margin-bottom:6px;}
.flabel-gem{width:4px;height:4px;background:var(--gold);border-radius:50%;}
.finput{width:100%;background:rgba(255,255,255,0.025);border:1px solid var(--rim);border-radius:11px;padding:11px 14px;color:var(--text);font-family:'DM Mono',monospace;font-size:13px;transition:all 0.25s;outline:none;-webkit-appearance:none;}
.finput::placeholder{color:var(--muted);}
.finput:focus{border-color:rgba(201,168,76,0.5);box-shadow:0 0 0 3px rgba(201,168,76,0.07);}
select.finput{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%234a6080'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 13px center;padding-right:34px;}
select.finput option{background:#0b1525;color:var(--text);}
textarea.finput{resize:vertical;min-height:80px;line-height:1.6;}
.div{height:1px;background:linear-gradient(90deg,transparent,var(--rim),transparent);margin:14px 0;}
/* DROPZONE */
.dz{position:relative;border:1.5px dashed rgba(255,255,255,0.08);border-radius:16px;padding:22px 18px;text-align:center;cursor:pointer;transition:all 0.3s;background:rgba(255,255,255,0.01);}
.dz:hover,.dz.over{border-color:rgba(201,168,76,0.4);background:rgba(201,168,76,0.02);}
.dz input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
.dz-orb{width:50px;height:50px;margin:0 auto 10px;border-radius:14px;background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.2);display:flex;align-items:center;justify-content:center;font-size:22px;transition:all 0.3s;}
.dz:hover .dz-orb{transform:translateY(-4px) scale(1.05);}
.dz-title{font-size:13px;font-weight:700;margin-bottom:3px;}
.dz-sub{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);}
.dz-formats{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;margin-top:8px;}
.dz-fmt{font-family:'DM Mono',monospace;font-size:9px;background:rgba(255,255,255,0.04);border:1px solid var(--rim);border-radius:4px;padding:2px 7px;color:var(--muted);}
.dz-fmt.img{border-color:rgba(0,229,200,0.2);color:rgba(0,229,200,0.6);}
.dz-fmt.audio{border-color:rgba(201,168,76,0.2);color:rgba(201,168,76,0.6);}
.dz-fmt.mesh{border-color:rgba(139,92,246,0.2);color:rgba(139,92,246,0.6);}
.fchip{display:none;align-items:center;gap:9px;background:rgba(0,229,160,0.06);border:1px solid rgba(0,229,160,0.2);border-radius:13px;padding:10px 13px;margin-top:9px;}
.fchip.show{display:flex;animation:chipIn 0.3s ease;}
@keyframes chipIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.fchip-ico{width:34px;height:34px;background:rgba(0,229,160,0.1);border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.fchip-info{flex:1;min-width:0;}
.fchip-name{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.fchip-size{font-family:'DM Mono',monospace;font-size:10px;color:var(--green);}
.fchip-rm{width:28px;height:28px;background:var(--red-dim);border:1px solid rgba(255,68,102,0.2);border-radius:7px;color:var(--red);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0;}
.rbxm-notice{display:none;background:rgba(255,68,102,0.07);border:1px solid rgba(255,68,102,0.2);border-radius:11px;padding:11px 14px;margin-top:8px;font-family:'DM Mono',monospace;font-size:11px;color:rgba(255,68,102,0.8);line-height:1.7;}
.rbxm-notice.show{display:block;}
.cost-preview{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:11px;padding:10px 14px;margin-bottom:12px;}
.cost-label{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);}
.cost-val{font-size:14px;font-weight:700;color:var(--gold);}
.btn-up,.btn-bulk-go{width:100%;padding:14px;border:none;border-radius:15px;background:linear-gradient(100deg,#8b6520 0%,var(--gold) 25%,var(--gold2) 50%,var(--gold) 75%,#8b6520 100%);background-size:300% 100%;color:#07050a;font-family:'Bebas Neue',sans-serif;font-size:17px;letter-spacing:4px;cursor:pointer;position:relative;overflow:hidden;transition:all 0.4s;box-shadow:0 4px 28px rgba(201,168,76,0.25);}
.btn-up:hover:not(:disabled),.btn-bulk-go:hover:not(:disabled){background-position:100% 0;transform:translateY(-2px);}
.btn-up:disabled,.btn-bulk-go:disabled{opacity:0.35;cursor:not-allowed;}
.shim{position:absolute;top:0;left:-100%;width:40%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4),transparent);transform:skewX(-20deg);animation:shim 3.5s infinite;}
@keyframes shim{0%{left:-100%}35%,100%{left:160%}}
.result{display:none;margin-top:12px;border-radius:16px;overflow:hidden;}
.result.show{display:block;animation:fadeUp 0.4s ease;}
.result.ok{border:1px solid rgba(0,229,160,0.2);background:rgba(0,229,160,0.03);}
.result.fail{border:1px solid rgba(255,68,102,0.2);background:rgba(255,68,102,0.03);}
.result-hdr{padding:10px 16px;font-size:10px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;}
.result.ok .result-hdr{color:var(--green);border-bottom:1px solid rgba(0,229,160,0.12);}
.result.fail .result-hdr{color:var(--red);border-bottom:1px solid rgba(255,68,102,0.12);}
.result-body{padding:12px 16px;}
.rrow{display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid rgba(255,255,255,0.04);}
.rrow:last-child{border-bottom:none;}
.rkey{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--muted);text-transform:uppercase;}
.rval{font-family:'DM Mono',monospace;font-size:12px;color:var(--gold2);cursor:pointer;max-width:200px;word-break:break-all;text-align:right;}
.rval:hover{color:var(--teal);}
.badge-proc{font-family:'DM Mono',monospace;font-size:9px;background:rgba(245,158,11,0.12);border:1px solid rgba(245,158,11,0.25);color:#f59e0b;padding:3px 8px;border-radius:5px;animation:blink 1.5s infinite;}
.warnbox{margin-top:12px;background:rgba(245,158,11,0.04);border:1px solid rgba(245,158,11,0.15);border-radius:13px;padding:11px 14px;font-family:'DM Mono',monospace;font-size:11px;color:rgba(245,158,11,0.65);line-height:1.8;}
.warnbox-t{color:#f59e0b;font-weight:500;margin-bottom:3px;font-size:11px;}
/* BULK */
.bulk-drop{position:relative;border:1.5px dashed rgba(201,168,76,0.2);border-radius:16px;padding:18px;text-align:center;cursor:pointer;transition:all 0.3s;background:rgba(201,168,76,0.02);margin-bottom:12px;}
.bulk-drop input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
.bulk-drop:hover{border-color:rgba(201,168,76,0.4);}
.bulk-list{display:flex;flex-direction:column;gap:7px;margin-bottom:12px;max-height:220px;overflow-y:auto;}
.bulk-list::-webkit-scrollbar{width:3px;}
.bulk-list::-webkit-scrollbar-thumb{background:rgba(201,168,76,0.3);border-radius:3px;}
.bulk-item{display:flex;align-items:center;gap:9px;background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:11px;padding:10px 12px;transition:all 0.25s;}
.bulk-item-info{flex:1;min-width:0;}
.bulk-name{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.bulk-meta{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:1px;}
.bulk-status{font-size:15px;flex-shrink:0;width:22px;text-align:center;}
.bulk-rm{width:26px;height:26px;background:var(--red-dim);border:1px solid rgba(255,68,102,0.2);border-radius:6px;color:var(--red);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;}
.bulk-cost{background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:11px;padding:10px 13px;display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
/* HISTORY */
.hist-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:12px;}
.stat-box{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:13px;padding:12px;text-align:center;}
.stat-num{font-family:'Bebas Neue',sans-serif;font-size:26px;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1;}
.stat-lbl{font-family:'DM Mono',monospace;font-size:8px;letter-spacing:1.5px;color:var(--muted);margin-top:2px;}
.hist-item{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;margin-bottom:9px;}
.hist-item:hover{border-color:rgba(201,168,76,0.2);}
.hist-item-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:5px;}
.hist-name{font-size:13px;font-weight:700;}
.hist-time{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);}
.hist-id{font-family:'DM Mono',monospace;font-size:11px;color:var(--gold);margin-bottom:6px;cursor:pointer;}
.hist-tags{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:7px;}
.hist-tag{font-family:'DM Mono',monospace;font-size:9px;background:rgba(255,255,255,0.04);border:1px solid var(--rim);border-radius:4px;padding:2px 7px;color:var(--muted2);}
.hist-rating{display:flex;align-items:center;gap:5px;}
.star{font-size:14px;cursor:pointer;color:rgba(255,255,255,0.12);transition:all 0.15s;}
.star.active{color:var(--gold);}
.star:hover{color:var(--gold2);transform:scale(1.2);}
.hist-empty{text-align:center;padding:36px 20px;color:var(--muted);}
.hist-empty-ico{font-size:38px;opacity:0.3;margin-bottom:10px;}
.hist-empty-t{font-family:'DM Mono',monospace;font-size:11px;line-height:1.7;}
/* DASHBOARD */
.dash-stats{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-bottom:12px;}
.dash-stat{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;position:relative;overflow:hidden;}
.dash-stat::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;}
.dash-stat.s1::before{background:linear-gradient(90deg,var(--gold),transparent);}
.dash-stat.s2::before{background:linear-gradient(90deg,var(--teal),transparent);}
.dash-stat.s3::before{background:linear-gradient(90deg,var(--gold2),transparent);}
.dash-stat.s4::before{background:linear-gradient(90deg,var(--purple),transparent);}
.dash-stat-num{font-family:'Bebas Neue',sans-serif;font-size:32px;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1;}
.dash-stat-lbl{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:2px;}
.chart-wrap{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:16px;margin-bottom:11px;}
.chart-title{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:12px;}
.bar-chart{display:flex;align-items:flex-end;gap:5px;height:70px;}
.bar-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;height:100%;}
.bar-wrap{flex:1;width:100%;display:flex;align-items:flex-end;}
.bar-fill{width:100%;background:linear-gradient(180deg,var(--gold2),var(--gold));border-radius:3px 3px 0 0;min-height:2px;position:relative;transition:height 0.6s ease;}
.bar-val{position:absolute;top:-15px;left:50%;transform:translateX(-50%);font-family:'DM Mono',monospace;font-size:9px;color:var(--gold2);white-space:nowrap;}
.bar-label{font-family:'DM Mono',monospace;font-size:8px;color:var(--muted);}
.type-breakdown{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;}
.type-breakdown-title{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:9px;}
.type-row{display:flex;align-items:center;gap:9px;padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.04);}
.type-row:last-child{border-bottom:none;}
.type-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0;}
.type-name{flex:1;font-size:12px;font-weight:600;}
.type-count{font-family:'Bebas Neue',sans-serif;font-size:19px;color:var(--gold2);}
/* LEADERBOARD */
.leader-row{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;margin-bottom:8px;}
.leader-row.me{border-color:rgba(201,168,76,0.4);background:rgba(201,168,76,0.04);}
.leader-rank{width:28px;text-align:center;font-size:18px;flex-shrink:0;}
.leader-avatar{width:36px;height:36px;border-radius:50%;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);display:flex;align-items:center;justify-content:center;font-size:19px;flex-shrink:0;}
.leader-info{flex:1;min-width:0;}
.leader-name{font-size:13px;font-weight:700;display:flex;align-items:center;gap:5px;flex-wrap:wrap;}
.leader-sub{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:1px;}
.leader-uploads{text-align:right;flex-shrink:0;}
.leader-num{font-family:'Bebas Neue',sans-serif;font-size:24px;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1;}
.leader-lbl{font-family:'DM Mono',monospace;font-size:8px;color:var(--muted);}
.badge-me{background:rgba(0,229,200,0.12);border:1px solid rgba(0,229,200,0.3);color:var(--teal);font-family:'DM Mono',monospace;font-size:8px;padding:2px 6px;border-radius:4px;}
/* REFERRAL */
.ref-card{background:linear-gradient(135deg,rgba(201,168,76,0.08),rgba(201,168,76,0.02));border:1px solid rgba(201,168,76,0.25);border-radius:17px;padding:18px;margin-bottom:12px;}
.ref-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:3px;color:var(--gold2);margin-bottom:4px;}
.ref-desc{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);line-height:1.6;margin-bottom:13px;}
.ref-code-box{background:rgba(0,0,0,0.3);border:1px solid rgba(201,168,76,0.3);border-radius:11px;padding:11px 14px;display:flex;justify-content:space-between;align-items:center;margin-bottom:9px;}
.ref-code{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:4px;color:var(--gold2);}
.ref-copy{padding:6px 12px;border:1px solid rgba(201,168,76,0.3);border-radius:8px;background:rgba(201,168,76,0.1);color:var(--gold);font-family:'DM Mono',monospace;font-size:10px;cursor:pointer;}
.ref-link-box{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:9px;padding:9px 13px;font-family:'DM Mono',monospace;font-size:9px;color:var(--muted2);word-break:break-all;margin-bottom:9px;cursor:pointer;}
.ref-stats{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px;}
.ref-stat{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:11px;padding:11px;text-align:center;}
.ref-stat-num{font-family:'Bebas Neue',sans-serif;font-size:26px;color:var(--gold2);}
.ref-stat-lbl{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);}
.btn-share-wa{width:100%;padding:11px;border:none;border-radius:11px;background:linear-gradient(135deg,rgba(37,211,102,0.15),rgba(18,140,126,0.08));border:1px solid rgba(37,211,102,0.3);color:#25d366;font-family:'Bebas Neue',sans-serif;font-size:14px;letter-spacing:2px;cursor:pointer;}
/* PROMO */
.promo-box{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:14px;margin-bottom:12px;}
.promo-input-row{display:flex;gap:7px;}
.btn-apply-promo{padding:11px 14px;border:none;border-radius:11px;background:rgba(167,139,250,0.15);border:1px solid rgba(167,139,250,0.3);color:var(--purple);font-family:'Bebas Neue',sans-serif;font-size:14px;letter-spacing:2px;cursor:pointer;white-space:nowrap;}
/* TICKET */
.ticket-row{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;margin-bottom:9px;}
.ticket-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:7px;}
.ticket-subject{font-size:12px;font-weight:700;}
.ticket-meta{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:2px;}
.ticket-status{font-family:'DM Mono',monospace;font-size:9px;padding:3px 8px;border-radius:6px;white-space:nowrap;}
.ticket-status.open{background:rgba(245,158,11,0.12);border:1px solid rgba(245,158,11,0.25);color:#f59e0b;}
.ticket-status.replied{background:rgba(0,229,200,0.1);border:1px solid rgba(0,229,200,0.25);color:var(--teal);}
.ticket-status.closed{background:rgba(0,229,160,0.1);border:1px solid rgba(0,229,160,0.25);color:var(--green);}
.ticket-msg{font-family:'DM Mono',monospace;font-size:11px;color:var(--muted2);line-height:1.7;margin-bottom:6px;}
.ticket-reply{background:rgba(0,229,200,0.05);border:1px solid rgba(0,229,200,0.15);border-radius:9px;padding:9px 13px;font-family:'DM Mono',monospace;font-size:11px;color:rgba(0,229,200,0.8);line-height:1.6;}
.ticket-reply-label{color:var(--gold);font-weight:600;}
.btn-ticket{width:100%;padding:13px;border:none;border-radius:13px;background:rgba(0,229,200,0.08);border:1px solid rgba(0,229,200,0.2);color:var(--teal);font-family:'Bebas Neue',sans-serif;font-size:15px;letter-spacing:3px;cursor:pointer;margin-bottom:12px;}
.btn-ticket:disabled{opacity:0.4;cursor:not-allowed;}
/* SETTINGS */
.settings-profile{background:linear-gradient(135deg,rgba(201,168,76,0.06),rgba(201,168,76,0.02));border:1px solid rgba(201,168,76,0.2);border-radius:16px;padding:16px;margin-bottom:16px;display:flex;align-items:center;gap:13px;}
.settings-avatar-wrap{position:relative;cursor:pointer;}
.settings-avatar{width:50px;height:50px;border-radius:50%;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.3);display:flex;align-items:center;justify-content:center;font-size:26px;}
.settings-avatar-edit{position:absolute;bottom:-2px;right:-2px;width:17px;height:17px;background:var(--gold);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:9px;color:#07050a;}
.settings-name{font-size:15px;font-weight:800;margin-bottom:2px;}
.settings-email{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);}
.settings-coins{font-family:'Bebas Neue',sans-serif;font-size:13px;letter-spacing:1px;color:var(--gold);margin-top:3px;}
.settings-section{margin-bottom:16px;}
.settings-section-title{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:3px;color:var(--gold);text-transform:uppercase;margin-bottom:10px;display:flex;align-items:center;gap:8px;}
.settings-section-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,rgba(201,168,76,0.3),transparent);}
.toggle-row{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:11px;padding:11px 13px;margin-bottom:8px;}
.toggle-label{font-family:'DM Mono',monospace;font-size:11px;color:var(--muted2);}
.toggle-label span{display:block;font-size:9px;color:var(--muted);margin-top:1px;}
.toggle{position:relative;width:44px;height:24px;flex-shrink:0;}
.toggle input{opacity:0;width:0;height:0;}
.toggle-slider{position:absolute;inset:0;background:rgba(255,255,255,0.08);border:1px solid var(--rim);border-radius:100px;cursor:pointer;transition:0.3s;}
.toggle-slider::before{content:'';position:absolute;width:18px;height:18px;left:2px;top:2px;background:var(--muted);border-radius:50%;transition:0.3s;}
.toggle input:checked+.toggle-slider{background:rgba(201,168,76,0.2);border-color:rgba(201,168,76,0.4);}
.toggle input:checked+.toggle-slider::before{transform:translateX(20px);background:var(--gold);}
.btn-save-settings{width:100%;padding:13px;border:none;border-radius:13px;background:linear-gradient(100deg,#8b6520,var(--gold),var(--gold2),var(--gold),#8b6520);background-size:300% 100%;color:#07050a;font-family:'Bebas Neue',sans-serif;font-size:15px;letter-spacing:3px;cursor:pointer;position:relative;overflow:hidden;transition:all 0.4s;margin-bottom:8px;}
.btn-save-settings:hover{background-position:100% 0;}
.btn-clear-settings{width:100%;padding:11px;border:1px solid rgba(255,68,102,0.2);border-radius:11px;background:rgba(255,68,102,0.05);color:var(--red);font-family:'Syne',sans-serif;font-size:12px;font-weight:700;cursor:pointer;}
.save-note{background:rgba(0,229,160,0.05);border:1px solid rgba(0,229,160,0.15);border-radius:9px;padding:10px 13px;font-family:'DM Mono',monospace;font-size:10px;color:rgba(0,229,160,0.6);line-height:1.7;margin-bottom:10px;}
.wa-note{background:rgba(37,211,102,0.05);border:1px solid rgba(37,211,102,0.2);border-radius:9px;padding:10px 13px;font-family:'DM Mono',monospace;font-size:10px;color:rgba(37,211,102,0.7);line-height:1.7;margin-bottom:9px;}
.btn-save-wa{width:100%;padding:11px;border:none;border-radius:11px;background:rgba(37,211,102,0.1);border:1px solid rgba(37,211,102,0.3);color:#25d366;font-family:'Bebas Neue',sans-serif;font-size:14px;letter-spacing:2px;cursor:pointer;}
/* TOPUP */
.topup-hero{text-align:center;padding:14px 0 10px;}
.topup-ring{width:88px;height:88px;border-radius:50%;background:conic-gradient(var(--gold) 0deg,var(--gold2) 60deg,var(--gold) 120deg,#6a4010 180deg,var(--gold) 240deg,var(--gold2) 300deg,var(--gold) 360deg);display:flex;align-items:center;justify-content:center;box-shadow:0 0 40px rgba(201,168,76,0.3);margin:0 auto 10px;position:relative;animation:ringPulse 3s ease-in-out infinite;}
@keyframes ringPulse{0%,100%{box-shadow:0 0 40px rgba(201,168,76,0.3)}50%{box-shadow:0 0 60px rgba(201,168,76,0.5)}}
.topup-ring::before{content:'';position:absolute;inset:8px;border-radius:50%;background:var(--deep);z-index:0;}
.topup-ring-inner{position:relative;z-index:1;text-align:center;}
.topup-ring-num{font-family:'Bebas Neue',sans-serif;font-size:24px;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1;}
.topup-ring-lbl{font-family:'DM Mono',monospace;font-size:8px;color:var(--muted);}
.topup-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:3px;color:var(--gold2);margin-bottom:3px;}
.topup-sub{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);}
.pkg-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:11px 0;}
.pkg{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;text-align:center;cursor:pointer;transition:all 0.3s;position:relative;overflow:hidden;}
.pkg:hover{border-color:rgba(201,168,76,0.4);transform:translateY(-2px);}
.pkg.hot{border-color:rgba(201,168,76,0.3);}
.pkg.hot::after{content:'POPULER';position:absolute;top:0;right:0;background:linear-gradient(135deg,var(--gold),var(--gold2));color:#07050a;font-family:'DM Mono',monospace;font-size:8px;font-weight:700;padding:4px 9px;border-radius:0 13px 0 9px;}
.pkg-coins{font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:2px;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1;}
.pkg-coins-lbl{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-bottom:5px;}
.pkg-price{font-size:13px;font-weight:700;}
.pkg-price-note{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:2px;}
.pkg-bonus{font-family:'DM Mono',monospace;font-size:9px;color:var(--green);margin-top:2px;}
/* MODAL */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:200;display:none;align-items:center;justify-content:center;padding:16px;backdrop-filter:blur(8px);overflow-y:auto;}
.modal-bg.show{display:flex;animation:fadeIn 0.3s ease;}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{background:linear-gradient(145deg,#0e1828,#080f1a);border:1px solid rgba(201,168,76,0.25);border-radius:22px;padding:24px;width:100%;max-width:400px;position:relative;animation:modalIn 0.4s cubic-bezier(0.22,1,0.36,1);margin:auto;}
@keyframes modalIn{from{opacity:0;transform:translateY(30px)scale(0.95)}to{opacity:1;transform:none}}
.modal::before{content:'';position:absolute;top:0;left:20%;right:20%;height:1px;background:linear-gradient(90deg,transparent,rgba(201,168,76,0.8),transparent);}
.modal-close{position:absolute;top:13px;right:13px;width:30px;height:30px;background:rgba(255,255,255,0.05);border:1px solid var(--rim);border-radius:8px;color:var(--muted);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;}
.modal-title{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:3px;color:var(--gold2);margin-bottom:4px;}
.modal-sub{font-family:'DM Mono',monospace;font-size:11px;color:var(--muted);margin-bottom:16px;line-height:1.6;}
.modal-order{background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:11px;padding:11px 14px;margin-bottom:14px;display:flex;justify-content:space-between;align-items:center;}
.modal-order-left .label,.modal-order-right .label{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);}
.modal-order-left .val,.modal-order-right .val{font-size:17px;font-weight:800;color:var(--gold2);}
.modal-order-right{text-align:right;}
.bank-cards{display:flex;flex-direction:column;gap:7px;margin-bottom:13px;}
.bank-card{background:rgba(255,255,255,0.025);border:1px solid var(--rim);border-radius:11px;padding:11px;display:flex;align-items:center;gap:9px;cursor:pointer;transition:all 0.25s;}
.bank-card:hover,.bank-card.selected{border-color:rgba(201,168,76,0.4);background:rgba(201,168,76,0.04);}
.bank-logo{width:38px;height:22px;border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;flex-shrink:0;}
.bank-logo.bca{background:#005baa;color:#fff;}
.bank-logo.dana{background:#118eea;color:#fff;}
.bank-logo.ovo{background:#4c3494;color:#fff;}
.bank-info{flex:1;}
.bank-name{font-size:12px;font-weight:700;}
.bank-num{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);margin-top:1px;}
.bank-holder{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted2);margin-top:1px;}
.bank-radio{width:15px;height:15px;border-radius:50%;border:2px solid var(--rim2);transition:all 0.2s;flex-shrink:0;}
.bank-card.selected .bank-radio{border-color:var(--gold);background:var(--gold);}
.modal-note{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:9px;padding:9px 13px;margin-bottom:13px;font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);line-height:1.7;}
.btn-confirm{width:100%;padding:13px;border:none;border-radius:12px;background:linear-gradient(100deg,#8b6520,var(--gold),var(--gold2),var(--gold),#8b6520);background-size:300% 100%;color:#07050a;font-family:'Bebas Neue',sans-serif;font-size:15px;letter-spacing:3px;cursor:pointer;position:relative;overflow:hidden;transition:all 0.4s;}
.btn-confirm:hover{background-position:100% 0;}
.success-modal{text-align:center;padding:8px 0;}
.success-icon{width:58px;height:58px;border-radius:50%;background:rgba(0,229,160,0.1);border:2px solid rgba(0,229,160,0.3);display:flex;align-items:center;justify-content:center;font-size:24px;margin:0 auto 13px;animation:successPop 0.5s cubic-bezier(0.22,1,0.36,1);}
@keyframes successPop{from{transform:scale(0.5);opacity:0}to{transform:scale(1);opacity:1}}
.success-title{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:3px;color:var(--green);margin-bottom:7px;}
.success-text{font-family:'DM Mono',monospace;font-size:12px;color:var(--muted);line-height:1.7;margin-bottom:11px;}
.order-id{font-family:'DM Mono',monospace;font-size:11px;color:var(--gold);background:rgba(201,168,76,0.08);border:1px solid rgba(201,168,76,0.2);border-radius:7px;padding:7px 13px;margin:0 auto 11px;display:inline-block;cursor:pointer;}
/* AVATAR MODAL */
.avatar-modal{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:300;display:none;align-items:center;justify-content:center;padding:16px;backdrop-filter:blur(8px);}
.avatar-modal.show{display:flex;animation:fadeIn 0.3s ease;}
.avatar-box{background:linear-gradient(145deg,#0e1828,#080f1a);border:1px solid rgba(201,168,76,0.25);border-radius:22px;padding:24px;width:100%;max-width:320px;position:relative;}
.avatar-box::before{content:'';position:absolute;top:0;left:20%;right:20%;height:1px;background:linear-gradient(90deg,transparent,rgba(201,168,76,0.8),transparent);}
.avatar-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:3px;color:var(--gold2);margin-bottom:3px;}
.avatar-sub{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);margin-bottom:16px;}
.avatar-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;}
.avatar-opt{width:100%;aspect-ratio:1;border-radius:13px;background:rgba(255,255,255,0.03);border:1px solid var(--rim);display:flex;align-items:center;justify-content:center;font-size:26px;cursor:pointer;transition:all 0.2s;}
.avatar-opt:hover{background:rgba(201,168,76,0.08);border-color:rgba(201,168,76,0.3);transform:scale(1.05);}
.avatar-opt.selected{background:rgba(201,168,76,0.12);border-color:rgba(201,168,76,0.5);}
.avatar-close{position:absolute;top:13px;right:13px;width:28px;height:28px;background:rgba(255,255,255,0.05);border:1px solid var(--rim);border-radius:7px;color:var(--muted);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;}
/* ADMIN */
.admin-wrap{position:relative;z-index:2;max-width:700px;margin:0 auto;padding:16px 16px 60px;}
.admin-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;padding-top:14px;}
.admin-title{font-family:'Bebas Neue',sans-serif;font-size:30px;letter-spacing:5px;background:linear-gradient(135deg,#fff,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.admin-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:18px;}
.admin-stat{background:var(--glass);border:1px solid var(--rim);border-radius:15px;padding:14px;position:relative;overflow:hidden;}
.admin-stat::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;}
.admin-stat.u::before{background:linear-gradient(90deg,var(--teal),transparent);}
.admin-stat.o::before{background:linear-gradient(90deg,var(--gold),transparent);}
.admin-stat.up::before{background:linear-gradient(90deg,var(--green),transparent);}
.admin-stat.p::before{background:linear-gradient(90deg,var(--red),transparent);}
.admin-stat.r::before{background:linear-gradient(90deg,var(--purple),transparent);}
.admin-stat.t::before{background:linear-gradient(90deg,var(--teal),transparent);}
.admin-stat-num{font-family:'Bebas Neue',sans-serif;font-size:26px;line-height:1;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.admin-stat-lbl{font-family:'DM Mono',monospace;font-size:8px;letter-spacing:1.5px;color:var(--muted);text-transform:uppercase;margin-top:2px;}
.admin-section{margin-bottom:18px;}
.admin-section-title{font-family:'Bebas Neue',sans-serif;font-size:15px;letter-spacing:3px;color:var(--gold2);margin-bottom:10px;display:flex;align-items:center;gap:8px;}
.admin-section-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,rgba(201,168,76,0.3),transparent);}
.admin-user-card{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:15px;padding:13px;margin-bottom:8px;}
.admin-user-card.banned{border-color:rgba(255,68,102,0.3);background:rgba(255,68,102,0.02);}
.admin-user-top{display:flex;align-items:center;gap:10px;margin-bottom:9px;}
.admin-user-avatar{width:36px;height:36px;border-radius:50%;background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.2);display:flex;align-items:center;justify-content:center;font-size:19px;flex-shrink:0;}
.admin-user-info{flex:1;}
.admin-user-name{font-size:13px;font-weight:700;display:flex;align-items:center;gap:5px;flex-wrap:wrap;}
.admin-user-email{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:1px;}
.admin-user-coins{text-align:right;flex-shrink:0;}
.coins-display{font-family:'Bebas Neue',sans-serif;font-size:19px;background:linear-gradient(135deg,var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.admin-user-actions{display:flex;gap:5px;align-items:center;flex-wrap:wrap;}
.btn-add-coin,.btn-sub-coin,.btn-set-coin{padding:7px 9px;border:none;border-radius:7px;font-family:'Syne',sans-serif;font-size:10px;font-weight:700;cursor:pointer;white-space:nowrap;}
.btn-add-coin{background:rgba(0,229,160,0.1);border:1px solid rgba(0,229,160,0.3);color:var(--green);}
.btn-sub-coin{background:rgba(255,68,102,0.1);border:1px solid rgba(255,68,102,0.3);color:var(--red);}
.btn-set-coin{background:rgba(201,168,76,0.1);border:1px solid rgba(201,168,76,0.3);color:var(--gold);}
.badge-admin{background:rgba(201,168,76,0.15);border:1px solid rgba(201,168,76,0.3);color:var(--gold);font-family:'DM Mono',monospace;font-size:7px;padding:2px 6px;border-radius:4px;}
.badge-banned{background:rgba(255,68,102,0.15);border:1px solid rgba(255,68,102,0.3);color:var(--red);font-family:'DM Mono',monospace;font-size:7px;padding:2px 6px;border-radius:4px;}
.admin-order-card{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:13px;padding:13px;margin-bottom:8px;}
.admin-order-card.pending{border-color:rgba(245,158,11,0.2);}
.admin-order-card.confirmed{border-color:rgba(0,229,160,0.15);}
.admin-order-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px;}
.admin-order-id{font-family:'DM Mono',monospace;font-size:11px;color:var(--gold);font-weight:600;}
.admin-order-user{font-family:'DM Mono',monospace;font-size:9px;color:var(--muted);margin-top:2px;}
.admin-order-status{font-family:'DM Mono',monospace;font-size:9px;padding:3px 8px;border-radius:6px;white-space:nowrap;}
.admin-order-status.pending{background:rgba(245,158,11,0.12);border:1px solid rgba(245,158,11,0.25);color:#f59e0b;}
.admin-order-status.confirmed{background:rgba(0,229,160,0.1);border:1px solid rgba(0,229,160,0.25);color:var(--green);}
.admin-order-detail{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);line-height:1.6;margin-bottom:7px;}
.btn-confirm-order{width:100%;padding:9px;border:none;border-radius:9px;background:rgba(0,229,160,0.1);border:1px solid rgba(0,229,160,0.3);color:var(--green);font-family:'Syne',sans-serif;font-size:11px;font-weight:700;cursor:pointer;}
.admin-refresh{width:100%;padding:10px;border:1px solid rgba(201,168,76,0.3);border-radius:11px;background:rgba(201,168,76,0.06);color:var(--gold);font-family:'Syne',sans-serif;font-size:12px;font-weight:700;cursor:pointer;margin-bottom:16px;}
.broadcast-box{background:rgba(255,255,255,0.02);border:1px solid var(--rim);border-radius:14px;padding:14px;margin-bottom:12px;}
.btn-broadcast{width:100%;padding:12px;border:none;border-radius:11px;background:rgba(167,139,250,0.12);border:1px solid rgba(167,139,250,0.3);color:var(--purple);font-family:'Bebas Neue',sans-serif;font-size:14px;letter-spacing:2px;cursor:pointer;margin-top:9px;}
.btn-broadcast:disabled{opacity:0.4;cursor:not-allowed;}
#adminLoading{text-align:center;padding:50px;font-family:'DM Mono',monospace;font-size:12px;color:var(--muted);}
.spinner{display:inline-block;width:14px;height:14px;border:2px solid rgba(0,0,0,0.2);border-top-color:rgba(0,0,0,0.7);border-radius:50%;animation:spin 0.6s linear infinite;vertical-align:middle;margin-right:6px;}
.spinner-light{border-color:rgba(201,168,76,0.2);border-top-color:var(--gold);}
@keyframes spin{to{transform:rotate(360deg)}}
.toast{position:fixed;bottom:26px;left:50%;transform:translateX(-50%)translateY(20px);background:rgba(8,14,24,0.96);border:1px solid rgba(201,168,76,0.2);border-radius:100px;padding:10px 22px;font-family:'DM Mono',monospace;font-size:12px;color:var(--text);z-index:500;opacity:0;transition:all 0.35s cubic-bezier(0.22,1,0.36,1);backdrop-filter:blur(20px);white-space:nowrap;max-width:90vw;text-align:center;}
.toast.show{opacity:1;transform:translateX(-50%)translateY(0);}
.footer{text-align:center;padding-top:36px;font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--muted);text-transform:uppercase;line-height:2;}
.footer-gem{color:var(--gold);}
@keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:none}}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div class="scanlines"></div>
<div class="vignette"></div>
<div class="toast" id="toast"></div>

<!-- AVATAR MODAL -->
<div class="avatar-modal" id="avatarModal">
  <div class="avatar-box">
    <button class="avatar-close" onclick="closeAvatarModal()">âœ•</button>
    <div class="avatar-title">Pilih Avatar</div>
    <div class="avatar-sub">Tap emoji untuk ganti avatar</div>
    <div class="avatar-grid" id="avatarGrid"></div>
  </div>
</div>

<!-- PAYMENT MODAL -->
<div class="modal-bg" id="modalBg">
  <div class="modal"><button class="modal-close" onclick="closeModal()">âœ•</button><div id="modalInner"></div></div>
</div>

<!-- NOTIF PANEL -->
<div class="notif-panel" id="notifPanel">
  <div class="notif-panel-hdr">
    <div class="notif-panel-title">ðŸ”” Notifikasi</div>
    <div class="notif-panel-clear" onclick="markAllRead()">Baca semua</div>
  </div>
  <div class="notif-scroll"><div id="notifList"></div></div>
</div>

<!-- â•â• AUTH â•â• -->
<div id="screen-auth" style="display:flex">
  <div style="position:fixed;inset:0;background:radial-gradient(ellipse at 30% 40%,rgba(201,168,76,0.06) 0%,transparent 60%),radial-gradient(ellipse at 70% 70%,rgba(0,229,200,0.04) 0%,transparent 50%)"></div>
  <div class="auth-box" style="position:relative;z-index:1">
    <span class="auth-logo">DEV</span>
    <div class="auth-tagline">Premium Asset Platform</div>
    <div class="auth-tabs">
      <button class="auth-tab active" onclick="switchAuthTab('login')">Masuk</button>
      <button class="auth-tab" onclick="switchAuthTab('register')">Daftar</button>
    </div>
    <div class="auth-err" id="authErr"></div>
    <div class="auth-form active" id="form-login">
      <div class="auth-field"><label class="auth-label">Email</label><input class="auth-input" type="email" id="loginEmail" placeholder="email@kamu.com"></div>
      <div class="auth-field"><label class="auth-label">Password</label><input class="auth-input" type="password" id="loginPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" onkeydown="if(event.key==='Enter')doLogin()"></div>
      <button class="btn-auth" id="btnLogin" onclick="doLogin()"><div class="shim"></div>MASUK SEKARANG</button>
      <div class="auth-divider"><div class="auth-divider-line"></div><div class="auth-divider-txt">ATAU</div><div class="auth-divider-line"></div></div>
      <button class="btn-google" onclick="doGoogle()"><svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Masuk dengan Google</button>
    </div>
    <div class="auth-form" id="form-register">
      <div class="ref-hint" id="refHint">ðŸŽ Daftar via referral! Kamu dapat bonus coin gratis!</div>
      <div class="auth-field"><label class="auth-label">Nama</label><input class="auth-input" type="text" id="regName" placeholder="Nama kamu"></div>
      <div class="auth-field"><label class="auth-label">Email</label><input class="auth-input" type="email" id="regEmail" placeholder="email@kamu.com"></div>
      <div class="auth-field"><label class="auth-label">Password</label><input class="auth-input" type="password" id="regPass" placeholder="Minimal 6 karakter"></div>
      <div class="auth-field"><label class="auth-label">Ulangi Password</label><input class="auth-input" type="password" id="regPass2" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" onkeydown="if(event.key==='Enter')doRegister()"></div>
      <button class="btn-auth" id="btnRegister" onclick="doRegister()"><div class="shim"></div>DAFTAR SEKARANG</button>
      <div class="auth-divider"><div class="auth-divider-line"></div><div class="auth-divider-txt">ATAU</div><div class="auth-divider-line"></div></div>
      <button class="btn-google" onclick="doGoogle()"><svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Daftar dengan Google</button>
    </div>
  </div>
</div>

<!-- â•â• APP â•â• -->
<div id="screen-app">
<div class="wrap">
  <div class="topbar">
    <div class="topbar-user">
      <div class="user-avatar" id="userAvatar" onclick="openAvatarPicker()" title="Ganti avatar">âš¡</div>
      <div><div class="user-name" id="userName">Loading...</div><div class="user-email" id="userEmail"></div></div>
    </div>
    <div class="topbar-btns">
      <div class="notif-btn" onclick="toggleNotifPanel()">ðŸ””<div class="notif-badge" id="notifBadge">0</div></div>
      <button class="btn-sm btn-sm-gold" id="adminTabBtn" onclick="goAdmin()" style="display:none">ðŸ‘‘ Admin</button>
      <button class="btn-sm btn-sm-red" onclick="doLogout()">Logout</button>
    </div>
  </div>
  <div class="hdr">
    <div class="hdr-eyebrow"><div class="hdr-eyebrow-dot"></div> Premium Asset Platform</div>
    <span class="hdr-logo">DEV</span>
    <div class="hdr-tagline">Roblox Open Cloud Â· Asset Upload Tool</div>
    <div class="hdr-rule"><div class="hdr-rule-line"></div><div class="hdr-rule-gem"></div><div class="hdr-rule-line"></div></div>
  </div>
  <div class="coin-bar">
    <div class="coin-bar-left"><div class="coin-icon"><span>âœ¦</span></div><div><div class="coin-lbl">Saldo Coin</div><div class="coin-val" id="coinVal">0</div></div></div>
    <div class="coin-bar-right">
      <button class="btn-pwa" id="pwaBtn" onclick="installPWA()">ðŸ“± Install</button>
      <button class="btn-topup-quick" onclick="switchTab(document.querySelectorAll('.tab-btn')[2],'topup')">+ Topup</button>
    </div>
  </div>
  <!-- TABS -->
  <div class="tabs-wrap">
    <div class="tabs" id="tabs">
      <div class="tab-slider" id="tabSlider"></div>
      <button class="tab-btn active" onclick="switchTab(this,'upload')"><span class="ti">â¬†</span> Upload</button>
      <button class="tab-btn" onclick="switchTab(this,'bulk')"><span class="ti">ðŸ“Ž</span> Bulk</button>
      <button class="tab-btn" onclick="switchTab(this,'topup')"><span class="ti">â—ˆ</span> Topup</button>
      <button class="tab-btn" onclick="switchTab(this,'history')"><span class="ti">â—Ž</span> History</button>
      <button class="tab-btn" onclick="switchTab(this,'dashboard')"><span class="ti">ðŸ“Š</span> Stats</button>
      <button class="tab-btn" onclick="switchTab(this,'leaderboard')"><span class="ti">ðŸ†</span> Board</button>
      <button class="tab-btn" onclick="switchTab(this,'referral')"><span class="ti">ðŸŽ</span> Referral</button>
      <button class="tab-btn" onclick="switchTab(this,'support')"><span class="ti">ðŸ’¬</span> Support</button>
      <button class="tab-btn" onclick="switchTab(this,'settings')"><span class="ti">âš™</span> Settings</button>
    </div>
  </div>

  <!-- UPLOAD -->
  <div class="panel active" id="panel-upload">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸ“¤</div><div><div class="ctitle-text">Upload Asset</div><div class="ctitle-sub">Single file Â· 1 Coin per upload</div></div></div>
      <div class="infobox">API Key â†’ <a href="https://create.roblox.com/dashboard/credentials" target="_blank">create.roblox.com/dashboard/credentials</a><br>Permission: <strong>Assets: Read + Write</strong></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Roblox User ID</div><input class="finput" type="text" id="userId" placeholder="Contoh: 3493541426" inputmode="numeric"></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Open Cloud API Key</div><input class="finput" type="password" id="apiKey" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
      <div class="div"></div>
      <div class="field">
        <div class="flabel"><span class="flabel-gem"></span> File Asset</div>
        <div class="dz" id="dz">
          <input type="file" id="fi" accept=".png,.jpg,.jpeg,.mp3,.ogg,.wav,.fbx" onchange="handleFile(this)">
          <div class="dz-orb">â˜ï¸</div>
          <div class="dz-title">Tap atau Drop File</div>
          <div class="dz-sub">PNG JPG MP3 OGG WAV FBX</div>
          <div class="dz-formats"><span class="dz-fmt img">PNG</span><span class="dz-fmt img">JPG</span><span class="dz-fmt audio">MP3</span><span class="dz-fmt audio">WAV</span><span class="dz-fmt mesh">FBX</span></div>
        </div>
        <div class="fchip" id="fchip"><div class="fchip-ico" id="fchipIco">ðŸ“„</div><div class="fchip-info"><div class="fchip-name" id="fName">â€”</div><div class="fchip-size" id="fSize">â€”</div></div><button class="fchip-rm" onclick="removeFile()">âœ•</button></div>
        <div class="rbxm-notice" id="rbxmNotice"><strong>âš  .rbxm tidak bisa via API!</strong> Gunakan Roblox Studio.</div>
      </div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Nama Asset</div><input class="finput" type="text" id="assetName" placeholder="Nama asset..."></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Tipe Asset</div>
        <select class="finput" id="assetType">
          <option value="Decal">ðŸ–¼ Image / Decal</option>
          <option value="Audio">ðŸŽµ Audio</option>
          <option value="MeshPart">ðŸ“¦ Mesh (.fbx)</option>
        </select>
      </div>
      <div class="cost-preview"><div class="cost-label">Biaya Upload</div><div class="cost-val">âœ¦ 1 Coin</div></div>
      <button class="btn-up" id="btnUp" onclick="doUpload()"><div class="shim"></div>ðŸš€ &nbsp; UPLOAD SEKARANG</button>
      <div class="result" id="result"><div class="result-hdr" id="resultHdr"></div><div class="result-body" id="resultBody"></div></div>
      <div class="warnbox"><div class="warnbox-t">âš  Info</div>Coin dipotong setelah upload berhasil. Settingan tersimpan otomatis di Settings.</div>
    </div>
  </div>

  <!-- BULK -->
  <div class="panel" id="panel-bulk">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸ“Ž</div><div><div class="ctitle-text">Bulk Upload</div><div class="ctitle-sub">Upload banyak file sekaligus</div></div></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Roblox User ID</div><input class="finput" type="text" id="bulkUserId" placeholder="Contoh: 3493541426" inputmode="numeric"></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Open Cloud API Key</div><input class="finput" type="password" id="bulkApiKey" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
      <div class="div"></div>
      <div class="bulk-drop">
        <input type="file" multiple accept=".png,.jpg,.jpeg,.mp3,.ogg,.wav,.fbx" onchange="handleBulkFiles(this)">
        <div style="font-size:26px;margin-bottom:7px">ðŸ“Ž</div>
        <div style="font-size:13px;font-weight:700;margin-bottom:2px">Pilih Banyak File</div>
        <div style="font-family:'DM Mono',monospace;font-size:10px;color:var(--muted)">PNG JPG MP3 WAV FBX</div>
      </div>
      <div class="bulk-list" id="bulkList"><div style="text-align:center;padding:18px;font-family:'DM Mono',monospace;font-size:11px;color:var(--muted)">Belum ada file</div></div>
      <div class="bulk-cost"><span style="font-family:'DM Mono',monospace;font-size:10px;color:var(--muted)">Total Biaya</span><span style="font-family:'Bebas Neue',sans-serif;font-size:18px;color:var(--gold)">âœ¦ <span id="bulkCoinCost">0</span> Coin</span></div>
      <button class="btn-bulk-go" id="btnBulk" onclick="doBulkUpload()"><div class="shim"></div>ðŸ“Ž &nbsp; BULK UPLOAD SEKARANG</button>
      <div class="warnbox" style="margin-top:10px"><div class="warnbox-t">âš  Info</div>1 file = 1 Coin. Nama asset otomatis = nama file. File diupload satu per satu.</div>
    </div>
  </div>

  <!-- TOPUP -->
  <div class="panel" id="panel-topup">
    <div class="card"><div class="card-glow"></div>
      <div class="topup-hero">
        <div class="topup-ring"><div class="topup-ring-inner"><div class="topup-ring-num" id="ringNum">0</div><div class="topup-ring-lbl">COINS</div></div></div>
        <div class="topup-title">Topup Coins</div>
        <div class="topup-sub">1 Coin = 1x Upload Â· Transfer / E-Wallet</div>
      </div>
      <div class="promo-box">
        <div style="font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--purple);text-transform:uppercase;margin-bottom:8px">ðŸŽŸï¸ Kode Promo</div>
        <div class="promo-input-row">
          <input class="finput" type="text" id="promoInput" placeholder="Masukkan kode promo..." style="text-transform:uppercase;flex:1">
          <button class="btn-apply-promo" onclick="applyPromoCode()">PAKAI</button>
        </div>
      </div>
      <div class="pkg-grid">
        <div class="pkg" onclick="openPayment(10,'Rp 3.000')"><div class="pkg-coins">10</div><div class="pkg-coins-lbl">COINS</div><div class="pkg-price">Rp 3.000</div><div class="pkg-price-note">Rp 500/coin</div></div>
        <div class="pkg hot" onclick="openPayment(25,'Rp 7.000')"><div class="pkg-coins">25</div><div class="pkg-coins-lbl">COINS</div><div class="pkg-price">Rp 7.000</div><div class="pkg-price-note">Rp 400/coin</div><div class="pkg-bonus">+5 Bonus</div></div>
        <div class="pkg" onclick="openPayment(60,'Rp 12.000')"><div class="pkg-coins">60</div><div class="pkg-coins-lbl">COINS</div><div class="pkg-price">Rp 12.000</div><div class="pkg-price-note">Rp 333/coin</div><div class="pkg-bonus">+10 Bonus</div></div>
        <div class="pkg" onclick="openPayment(150,'Rp 25.000')"><div class="pkg-coins">150</div><div class="pkg-coins-lbl">COINS</div><div class="pkg-price">Rp 25.000</div><div class="pkg-price-note">Rp 267/coin</div><div class="pkg-bonus">+30 Bonus</div></div>
      </div>
      <div class="warnbox"><div class="warnbox-t">ðŸ“‹ Cara Topup</div>Pilih paket â†’ Pilih bank â†’ Transfer â†’ Chat Admin WA â†’ Kirim bukti<br><strong style="color:var(--gold)">âœ¦ Coin masuk + Notifikasi otomatis</strong></div>
    </div>
  </div>

  <!-- HISTORY -->
  <div class="panel" id="panel-history">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸ“‹</div><div><div class="ctitle-text">History Upload</div><div class="ctitle-sub">Tap â˜… untuk kasih rating</div></div></div>
      <div class="hist-stats">
        <div class="stat-box"><div class="stat-num" id="statTotal">0</div><div class="stat-lbl">Total</div></div>
        <div class="stat-box"><div class="stat-num" id="statSuccess">0</div><div class="stat-lbl">Berhasil</div></div>
        <div class="stat-box"><div class="stat-num" id="statCoins">0</div><div class="stat-lbl">Coin</div></div>
      </div>
      <div id="histList"><div class="hist-empty"><div class="hist-empty-ico">â—Ž</div><div class="hist-empty-t">Belum ada history.</div></div></div>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div class="panel" id="panel-dashboard">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸ“Š</div><div><div class="ctitle-text">Dashboard Statistik</div><div class="ctitle-sub">Analisis upload kamu</div></div></div>
      <div class="dash-stats">
        <div class="dash-stat s1"><div class="dash-stat-num" id="dashTotalUploads">0</div><div class="dash-stat-lbl">Total Upload</div></div>
        <div class="dash-stat s2"><div class="dash-stat-num" id="dashThisWeek">0</div><div class="dash-stat-lbl">Minggu Ini</div></div>
        <div class="dash-stat s3"><div class="dash-stat-num" id="dashAvgRating">â€”</div><div class="dash-stat-lbl">Avg Rating</div></div>
        <div class="dash-stat s4"><div class="dash-stat-num" id="dashRatedCount">0</div><div class="dash-stat-lbl">Sudah Dirating</div></div>
      </div>
      <div class="chart-wrap"><div class="chart-title">ðŸ“ˆ Upload 7 Hari Terakhir</div><div class="bar-chart" id="barChart"><div style="padding:20px;text-align:center;font-family:'DM Mono',monospace;font-size:11px;color:var(--muted)">Memuat...</div></div></div>
      <div class="type-breakdown"><div class="type-breakdown-title">ðŸ“¦ Tipe Asset</div><div id="typeBreakdown"></div></div>
    </div>
  </div>

  <!-- LEADERBOARD -->
  <div class="panel" id="panel-leaderboard">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸ†</div><div><div class="ctitle-text">Leaderboard</div><div class="ctitle-sub">Top uploader DEV Platform</div></div></div>
      <div id="leaderList"><div class="hist-empty"><div class="hist-empty-ico">ðŸ†</div><div class="hist-empty-t">Memuat...</div></div></div>
    </div>
  </div>

  <!-- REFERRAL -->
  <div class="panel" id="panel-referral">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸŽ</div><div><div class="ctitle-text">Program Referral</div><div class="ctitle-sub">Ajak teman, dapat bonus coin!</div></div></div>
      <div class="ref-card">
        <div class="ref-title">Kode Referral Kamu</div>
        <div class="ref-desc">Bagikan kode/link ini ke teman. Jika mereka daftar pakai link kamu:<br>âœ¦ Kamu dapat <strong style="color:var(--gold)">+5 Coin</strong> Â· Teman dapat <strong style="color:var(--green)">+3 Coin</strong> gratis!</div>
        <div class="ref-code-box"><span class="ref-code" id="myRefCode">â€”</span><button class="ref-copy" onclick="copyRefLink()">ðŸ“‹ Copy Link</button></div>
        <div class="ref-link-box" id="myRefLink" onclick="copyRefLink()">â€”</div>
        <div class="ref-stats">
          <div class="ref-stat"><div class="ref-stat-num" id="myRefCount">0</div><div class="ref-stat-lbl">Teman Diundang</div></div>
          <div class="ref-stat"><div class="ref-stat-num" id="myRefEarned">0</div><div class="ref-stat-lbl">Coin Earned</div></div>
        </div>
        <button class="btn-share-wa" onclick="shareRefWA()">ðŸ’¬ &nbsp; SHARE VIA WHATSAPP</button>
      </div>
      <div class="warnbox"><div class="warnbox-t">ðŸ“‹ Cara Kerja Referral</div>1. Copy link referral kamu<br>2. Bagikan ke teman<br>3. Teman daftar pakai link kamu<br>4. Kamu +5 Coin, teman +3 Coin otomatis!</div>
    </div>
  </div>

  <!-- SUPPORT -->
  <div class="panel" id="panel-support">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">ðŸ’¬</div><div><div class="ctitle-text">Support</div><div class="ctitle-sub">Kirim ticket ke admin</div></div></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Tipe Masalah</div>
        <select class="finput" id="ticketType">
          <option value="Bug Report">ðŸ› Bug Report</option>
          <option value="Pembayaran">ðŸ’° Masalah Pembayaran</option>
          <option value="Upload Error">ðŸ“¤ Upload Error</option>
          <option value="Pertanyaan">â“ Pertanyaan Umum</option>
          <option value="Fitur Baru">âœ¨ Request Fitur</option>
          <option value="Lainnya">ðŸ“ Lainnya</option>
        </select>
      </div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Subject</div><input class="finput" type="text" id="ticketSubject" placeholder="Ringkasan masalah..."></div>
      <div class="field"><div class="flabel"><span class="flabel-gem"></span> Pesan</div><textarea class="finput" id="ticketMsg" placeholder="Jelaskan detail masalahmu..."></textarea></div>
      <button class="btn-ticket" id="btnTicket" onclick="sendTicket()">ðŸ“¨ &nbsp; KIRIM TICKET</button>
      <div class="div"></div>
      <div style="font-family:'DM Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:10px;">ðŸ“¬ Ticket Saya</div>
      <div id="myTicketList"><div style="text-align:center;padding:18px;font-family:'DM Mono',monospace;font-size:11px;color:var(--muted)">Buka tab Support untuk lihat ticket.</div></div>
    </div>
  </div>

  <!-- SETTINGS -->
  <div class="panel" id="panel-settings">
    <div class="card"><div class="card-glow"></div>
      <div class="ctitle"><div class="ctitle-icon">âš™ï¸</div><div><div class="ctitle-text">Settings</div><div class="ctitle-sub">Konfigurasi akun kamu</div></div></div>
      <div class="settings-profile">
        <div class="settings-avatar-wrap" onclick="openAvatarPicker()">
          <div class="settings-avatar" id="settingsAvatar">âš¡</div>
          <div class="settings-avatar-edit">âœ</div>
        </div>
        <div><div class="settings-name" id="sDisplayName">â€”</div><div class="settings-email" id="sDisplayEmail">â€”</div><div class="settings-coins">âœ¦ <span id="sDisplayCoins">0</span> Coins</div></div>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">ðŸ”” Notifikasi WhatsApp</div>
        <div class="wa-note">Masukkan nomor WA supaya admin bisa kirim notifikasi saat coin masuk atau ticket dibalas!</div>
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Nomor WhatsApp</div><input class="finput" type="tel" id="sWaNumber" placeholder="628123456789 (awali 62)"></div>
        <button class="btn-save-wa" onclick="saveWaNumber()">ðŸ“± &nbsp; SIMPAN NOMOR WA</button>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">ðŸŽ® Roblox Config</div>
        <div class="save-note">âœ“ Isi sekali, tersimpan otomatis. Tidak perlu isi ulang setiap upload!</div>
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Roblox User ID</div><input class="finput" type="text" id="sUserId" placeholder="Contoh: 3493541426" inputmode="numeric"></div>
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Open Cloud API Key</div><input class="finput" type="password" id="sApiKey" placeholder="Paste API Key kamu..."></div>
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Default Tipe Asset</div>
          <select class="finput" id="sDefType"><option value="Decal">ðŸ–¼ Image / Decal</option><option value="Audio">ðŸŽµ Audio</option><option value="MeshPart">ðŸ“¦ Mesh</option></select>
        </div>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">ðŸ”’ Keamanan</div>
        <div class="toggle-row"><div class="toggle-label">Tampilkan API Key<span>Lihat API Key sebagai teks</span></div><label class="toggle"><input type="checkbox" id="sShowApiKey" onchange="toggleApiKeyVisibility()"><span class="toggle-slider"></span></label></div>
      </div>
      <button class="btn-save-settings" onclick="saveSettings()"><div class="shim"></div>ðŸ’¾ &nbsp; SIMPAN SETTINGAN</button>
      <button class="btn-clear-settings" onclick="clearSettings()">ðŸ—‘ Hapus Semua Settingan</button>
    </div>
  </div>

  <div class="footer"><span class="footer-gem">âœ¦</span> DEV UPLOADER <span class="footer-gem">âœ¦</span><br>Premium Edition Â· Firebase Powered</div>
</div>
</div>

<!-- â•â• ADMIN â•â• -->
<div id="screen-admin">
<div class="admin-wrap">
  <div class="admin-header">
    <div class="admin-title">ðŸ‘‘ ADMIN PANEL</div>
    <button class="btn-sm btn-sm-gold" onclick="goApp()">â† Kembali</button>
  </div>
  <div id="adminLoading"><span class="spinner spinner-light"></span> Memuat data...</div>
  <div id="adminContent" style="display:none">
    <div class="admin-stats">
      <div class="admin-stat u"><div class="admin-stat-num" id="adminStatUsers">0</div><div class="admin-stat-lbl">Users</div></div>
      <div class="admin-stat o"><div class="admin-stat-num" id="adminStatOrders">0</div><div class="admin-stat-lbl">Orders</div></div>
      <div class="admin-stat up"><div class="admin-stat-num" id="adminStatUploads">0</div><div class="admin-stat-lbl">Uploads</div></div>
      <div class="admin-stat p"><div class="admin-stat-num" id="adminStatPending">0</div><div class="admin-stat-lbl">Pending</div></div>
      <div class="admin-stat r"><div class="admin-stat-num" id="adminStatRevenue" style="font-size:16px">Rp 0</div><div class="admin-stat-lbl">Revenue</div></div>
      <div class="admin-stat t"><div class="admin-stat-num" id="adminStatTickets">0</div><div class="admin-stat-lbl">Tickets</div></div>
    </div>
    <button class="admin-refresh" onclick="loadAdminData()">ðŸ”„ &nbsp; Refresh Data</button>

    <!-- REVENUE CHART -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸ’¹ Laporan Revenue</div>
      <div class="chart-wrap"><div class="chart-title">Revenue per Bulan</div><div class="bar-chart" id="revenueChart"></div></div>
    </div>

    <!-- BROADCAST -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸ“¢ Broadcast ke Semua User</div>
      <div class="broadcast-box">
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Icon</div><input class="finput" type="text" id="broadIcon" placeholder="ðŸ“¢" style="font-size:18px;max-width:80px"></div>
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Judul</div><input class="finput" type="text" id="broadTitle" placeholder="Judul broadcast..."></div>
        <div class="field"><div class="flabel"><span class="flabel-gem"></span> Pesan</div><textarea class="finput" id="broadMsg" placeholder="Isi pesan broadcast..."></textarea></div>
        <button class="btn-broadcast" id="btnBroadcast" onclick="sendBroadcast()">ðŸ“¢ &nbsp; KIRIM BROADCAST</button>
      </div>
    </div>

    <!-- PROMO CODES -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸŽŸï¸ Kelola Kode Promo</div>
      <div class="broadcast-box">
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:0">
          <div class="field" style="margin-bottom:0"><div class="flabel"><span class="flabel-gem"></span> Kode</div><input class="finput" type="text" id="promoCode" placeholder="HEMAT20" style="text-transform:uppercase"></div>
          <div class="field" style="margin-bottom:0"><div class="flabel"><span class="flabel-gem"></span> +Coin</div><input class="finput" type="number" id="promoBonusCoin" placeholder="10"></div>
          <div class="field" style="margin-bottom:0"><div class="flabel"><span class="flabel-gem"></span> Max Pakai</div><input class="finput" type="number" id="promoMaxUses" placeholder="0=âˆž"></div>
        </div>
        <button class="btn-broadcast" onclick="createPromo()" style="margin-top:10px">ðŸŽŸï¸ &nbsp; BUAT KODE PROMO</button>
      </div>
      <div id="promoList" style="margin-top:10px"></div>
    </div>

    <!-- TICKETS -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸŽ« Tickets Support</div>
      <div id="adminTicketList"></div>
    </div>

    <!-- ORDERS -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸ“¦ Orders Masuk</div>
      <div id="adminOrderList"></div>
    </div>

    <!-- USERS -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸ‘¥ Manage Users</div>
      <div id="adminUserList"></div>
    </div>

    <!-- UPLOADS -->
    <div class="admin-section">
      <div class="admin-section-title">ðŸ“¤ Riwayat Upload</div>
      <div id="adminUploadList"></div>
    </div>
  </div>
  <div class="footer"><span class="footer-gem">âœ¦</span> DEV UPLOADER ADMIN <span class="footer-gem">âœ¦</span></div>
</div>
</div>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, updateProfile } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js';
import { getFirestore, doc, setDoc, getDoc, updateDoc, collection, query, orderBy, getDocs, addDoc, serverTimestamp, increment, where, limit, writeBatch } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';

const firebaseConfig={apiKey:"AIzaSyDyi8FXoJDf-_VvMkmnHcQ7dBGKPJULnmc",authDomain:"dev-uploader-5bd4b.firebaseapp.com",projectId:"dev-uploader-5bd4b",storageBucket:"dev-uploader-5bd4b.firebasestorage.app",messagingSenderId:"534864483602",appId:"1:534864483602:web:965fdae6f377e2239b0fcb"};
const ADMIN_EMAIL='rhokimkecil@gmail.com',ADMIN_WA='6287729035761';
const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),googleProvider=new GoogleAuthProvider();
let currentUser=null,currentUserData=null,isAdmin=false;

// PWA
let deferredPrompt=null;
window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();deferredPrompt=e;document.getElementById('pwaBtn').style.display='flex';});
window.installPWA=async function(){if(!deferredPrompt)return toast('Sudah terinstall atau tidak support PWA');deferredPrompt.prompt();const{outcome}=await deferredPrompt.userChoice;if(outcome==='accepted')toast('âœ“ App berhasil diinstall!');deferredPrompt=null;document.getElementById('pwaBtn').style.display='none';};

// AUTH
onAuthStateChanged(auth,async user=>{
  if(user){currentUser=user;await loadUserData(user);showApp();}
  else{currentUser=null;currentUserData=null;isAdmin=false;showAuth();}
});
async function loadUserData(user){
  const ref=doc(db,'users',user.uid),snap=await getDoc(ref);
  if(!snap.exists()){
    const isAdm=user.email===ADMIN_EMAIL,rc=genCode(user.uid);
    const pendRef=localStorage.getItem('dev_pending_referral');
    let coins=isAdm?999:0;if(pendRef&&!isAdm)coins+=3;
    await setDoc(ref,{uid:user.uid,email:user.email,name:user.displayName||user.email.split('@')[0],coins,totalUploads:0,createdAt:serverTimestamp(),isAdmin:isAdm,waNumber:'',referralCode:rc,referralCount:0,referralEarned:0,avatarEmoji:'âš¡',isBanned:false});
    currentUserData={coins,name:user.displayName||user.email.split('@')[0],isAdmin:isAdm,totalUploads:0,waNumber:'',referralCode:rc,referralCount:0,referralEarned:0,avatarEmoji:'âš¡',isBanned:false};
    if(pendRef&&!isAdm){try{const rs=await getDocs(query(collection(db,'users'),where('referralCode','==',pendRef)));if(!rs.empty){const rd=rs.docs[0];await updateDoc(doc(db,'users',rd.id),{coins:increment(5),referralCount:increment(1),referralEarned:increment(5)});await addDoc(collection(db,'referrals'),{referrerId:rd.id,newUserId:user.uid,newUserEmail:user.email,code:pendRef,createdAt:serverTimestamp()});await addDoc(collection(db,'notifications'),{uid:rd.id,title:'ðŸŽ Referral Bonus!',message:`+5 Coin dari referral ke ${user.email}`,icon:'ðŸŽ',read:false,createdAt:serverTimestamp()});}}catch(e){}localStorage.removeItem('dev_pending_referral');}
  } else {
    currentUserData=snap.data();
    if(user.email===ADMIN_EMAIL&&!currentUserData.isAdmin){await updateDoc(ref,{isAdmin:true});currentUserData.isAdmin=true;}
    if(!currentUserData.referralCode){const rc=genCode(user.uid);await updateDoc(ref,{referralCode:rc});currentUserData.referralCode=rc;}
    if(!currentUserData.avatarEmoji){await updateDoc(ref,{avatarEmoji:'âš¡'});currentUserData.avatarEmoji='âš¡';}
  }
  isAdmin=currentUserData.isAdmin===true;
  if(currentUserData.isBanned&&!isAdmin){await signOut(auth);alert('Akun kamu disuspend. Hubungi admin.');return;}
  const up=new URLSearchParams(window.location.search);const rf=up.get('ref');if(rf)localStorage.setItem('dev_pending_referral',rf);
}
function genCode(uid){return'DEV'+uid.slice(-6).toUpperCase();}
function showAuth(){document.getElementById('screen-auth').style.display='flex';document.getElementById('screen-app').style.display='none';document.getElementById('screen-admin').style.display='none';stopCanvas();}
function showApp(){document.getElementById('screen-auth').style.display='none';document.getElementById('screen-app').style.display='block';document.getElementById('screen-admin').style.display='none';startCanvas();updateUI();loadHistory();loadSettings();loadNotifications();document.getElementById('adminTabBtn').style.display=isAdmin?'flex':'none';}
function showAdmin(){document.getElementById('screen-auth').style.display='none';document.getElementById('screen-app').style.display='none';document.getElementById('screen-admin').style.display='block';loadAdminData();}
function updateUI(){
  if(!currentUserData)return;
  const av=currentUserData.avatarEmoji||'âš¡',coins=currentUserData.coins||0;
  ['userAvatar','settingsAvatar'].forEach(id=>{const el=document.getElementById(id);if(el)el.textContent=av;});
  document.getElementById('coinVal').textContent=coins;
  document.getElementById('ringNum').textContent=coins;
  document.getElementById('userName').textContent=currentUserData.name||'User';
  document.getElementById('userEmail').textContent=currentUser?.email||'';
  document.getElementById('sDisplayName').textContent=currentUserData.name||'User';
  document.getElementById('sDisplayEmail').textContent=currentUser?.email||'';
  document.getElementById('sDisplayCoins').textContent=coins;
  if(currentUserData.waNumber){const el=document.getElementById('sWaNumber');if(el)el.value=currentUserData.waNumber;}
  const rc=currentUserData.referralCode||'';
  const refLink=window.location.origin+window.location.pathname+'?ref='+rc;
  const e1=document.getElementById('myRefCode');if(e1)e1.textContent=rc;
  const e2=document.getElementById('myRefLink');if(e2)e2.textContent=refLink;
  const e3=document.getElementById('myRefCount');if(e3)e3.textContent=currentUserData.referralCount||0;
  const e4=document.getElementById('myRefEarned');if(e4)e4.textContent=currentUserData.referralEarned||0;
}

// AVATAR
const AVATARS=['âš¡','ðŸ”¥','ðŸ’Ž','ðŸŽ®','ðŸš€','ðŸŒ™','â­','ðŸŽ¯','ðŸ¦Š','ðŸ‰','ðŸ’€','ðŸ¤–','ðŸ‘¾','ðŸŽª','ðŸŒŠ','ðŸŽ­'];
window.openAvatarPicker=function(){document.getElementById('avatarGrid').innerHTML=AVATARS.map(a=>`<div class="avatar-opt ${a===(currentUserData?.avatarEmoji||'âš¡')?'selected':''}" onclick="selectAvatar('${a}')">${a}</div>`).join('');document.getElementById('avatarModal').classList.add('show');}
window.selectAvatar=async function(emoji){document.querySelectorAll('.avatar-opt').forEach(el=>el.classList.remove('selected'));event.target.classList.add('selected');try{await updateDoc(doc(db,'users',currentUser.uid),{avatarEmoji:emoji});currentUserData.avatarEmoji=emoji;updateUI();toast('âœ“ Avatar diupdate!');setTimeout(()=>document.getElementById('avatarModal').classList.remove('show'),300);}catch(e){toast('âš  Gagal');}}
window.closeAvatarModal=function(){document.getElementById('avatarModal').classList.remove('show');}

// NOTIFICATIONS
async function loadNotifications(){
  if(!currentUser)return;
  try{
    const q=query(collection(db,'notifications'),where('uid','==',currentUser.uid),orderBy('createdAt','desc'),limit(20));
    const snap=await getDocs(q);const notifs=[];snap.forEach(d=>notifs.push({id:d.id,...d.data()}));
    const unread=notifs.filter(n=>!n.read).length;
    const badge=document.getElementById('notifBadge');if(badge){badge.textContent=unread;badge.style.display=unread>0?'flex':'none';}
    const list=document.getElementById('notifList');
    if(!list)return;
    list.innerHTML=notifs.length?notifs.map(n=>`<div class="notif-item ${n.read?'':'unread'}" onclick="markRead('${n.id}')"><div class="notif-icon">${n.icon||'ðŸ””'}</div><div class="notif-body"><div class="notif-title">${n.title||''}</div><div class="notif-msg">${n.message||''}</div><div class="notif-time">${n.createdAt?.toDate?n.createdAt.toDate().toLocaleString('id-ID'):''}</div></div>${!n.read?'<div class="notif-dot"></div>':''}</div>`).join(''):'<div style="text-align:center;padding:28px;font-family:DM Mono,monospace;font-size:11px;color:var(--muted)">Belum ada notifikasi</div>';
  }catch(e){}
}
window.markRead=async function(nid){try{await updateDoc(doc(db,'notifications',nid),{read:true});loadNotifications();}catch(e){}}
window.markAllRead=async function(){try{const q=query(collection(db,'notifications'),where('uid','==',currentUser.uid),where('read','==',false));const snap=await getDocs(q);const batch=writeBatch(db);snap.docs.forEach(d=>batch.update(d.ref,{read:true}));await batch.commit();loadNotifications();toast('âœ“ Semua dibaca');}catch(e){}}
window.toggleNotifPanel=function(){document.getElementById('notifPanel').classList.toggle('show');}
document.addEventListener('click',e=>{const p=document.getElementById('notifPanel');if(p&&p.classList.contains('show')&&!p.contains(e.target)&&!e.target.classList.contains('notif-btn')&&!e.target.closest('.notif-btn')){p.classList.remove('show');}});

// REFERRAL
window.copyRefLink=function(){const rc=currentUserData?.referralCode||'',link=window.location.origin+window.location.pathname+'?ref='+rc;navigator.clipboard.writeText(link).then(()=>toast('âœ“ Link referral disalin!'));}
window.shareRefWA=function(){const rc=currentUserData?.referralCode||'',link=window.location.origin+window.location.pathname+'?ref='+rc,msg=encodeURIComponent(`Hai! Coba DEV Uploader â€” platform upload asset Roblox premium!\n\nDaftar pakai link referral aku, kamu dapat BONUS 3 Coin gratis!\n\nðŸ‘‰ ${link}`);window.open(`https://wa.me/?text=${msg}`,'_blank');}

// PROMO
window.applyPromoCode=async function(){
  const code=document.getElementById('promoInput').value.trim().toUpperCase();
  if(!code)return toast('âš  Masukkan kode promo!');
  try{
    const ps=await getDocs(query(collection(db,'promos'),where('code','==',code),where('active','==',true)));
    if(ps.empty)return toast('âœ• Kode promo tidak valid!');
    const promo=ps.docs[0],pd=promo.data();
    const us=await getDocs(query(collection(db,'promoUses'),where('uid','==',currentUser.uid),where('code','==',code)));
    if(!us.empty)return toast('âœ• Kode sudah pernah dipakai!');
    if(pd.maxUses&&(pd.usedCount||0)>=pd.maxUses)return toast('âœ• Kode promo sudah habis!');
    const bonus=pd.coinBonus||0;
    await updateDoc(doc(db,'users',currentUser.uid),{coins:increment(bonus)});
    await addDoc(collection(db,'promoUses'),{uid:currentUser.uid,code,usedAt:serverTimestamp()});
    await updateDoc(promo.ref,{usedCount:increment(1)});
    await addDoc(collection(db,'notifications'),{uid:currentUser.uid,title:'ðŸŽŸï¸ Kode Promo Valid!',message:`+${bonus} Coin dari kode ${code}`,icon:'ðŸŽŸï¸',read:false,createdAt:serverTimestamp()});
    currentUserData.coins=(currentUserData.coins||0)+bonus;updateUI();
    document.getElementById('promoInput').value='';
    toast(`ðŸŽ‰ +${bonus} Coin dari promo ${code}!`);loadNotifications();
  }catch(e){toast('âš  Gagal: '+e.message);}
}

// SETTINGS
function saveSettings(){const s={sUserId:document.getElementById('sUserId').value,sApiKey:document.getElementById('sApiKey').value,sDefType:document.getElementById('sDefType').value,sShowApiKey:document.getElementById('sShowApiKey').checked};localStorage.setItem('dev_settings',JSON.stringify(s));applySettingsToUpload();toast('âœ“ Settingan tersimpan!');}
function loadSettings(){try{const s=JSON.parse(localStorage.getItem('dev_settings')||'{}');if(s.sUserId){document.getElementById('sUserId').value=s.sUserId;document.getElementById('userId').value=s.sUserId;document.getElementById('bulkUserId').value=s.sUserId;}if(s.sApiKey){document.getElementById('sApiKey').value=s.sApiKey;document.getElementById('apiKey').value=s.sApiKey;document.getElementById('bulkApiKey').value=s.sApiKey;}if(s.sDefType){document.getElementById('sDefType').value=s.sDefType;document.getElementById('assetType').value=s.sDefType;}if(s.sShowApiKey!==undefined){document.getElementById('sShowApiKey').checked=s.sShowApiKey;const t=s.sShowApiKey?'text':'password';document.getElementById('apiKey').type=t;document.getElementById('sApiKey').type=t;}}catch(e){}}
function applySettingsToUpload(){try{const s=JSON.parse(localStorage.getItem('dev_settings')||'{}');if(s.sUserId)document.getElementById('userId').value=s.sUserId;if(s.sApiKey)document.getElementById('apiKey').value=s.sApiKey;if(s.sDefType)document.getElementById('assetType').value=s.sDefType;}catch(e){}}
window.saveSettings=saveSettings;
window.clearSettings=function(){if(!confirm('Hapus semua settingan?'))return;localStorage.removeItem('dev_settings');['sUserId','sApiKey','userId','apiKey','bulkUserId','bulkApiKey'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});toast('âœ“ Settingan dihapus!');}
window.toggleApiKeyVisibility=function(){const show=document.getElementById('sShowApiKey').checked,t=show?'text':'password';document.getElementById('apiKey').type=t;document.getElementById('sApiKey').type=t;}
window.saveWaNumber=async function(){const wa=document.getElementById('sWaNumber').value.trim().replace(/\D/g,'');if(!wa)return toast('âš  Masukkan nomor WA!');try{await updateDoc(doc(db,'users',currentUser.uid),{waNumber:wa});currentUserData.waNumber=wa;toast('âœ“ Nomor WA tersimpan!');}catch(e){toast('âš  Gagal');}}

// UPLOAD
let selFile=null;
window.handleFile=function(inp){const f=inp.files[0];if(!f)return;selFile=f;const ext=f.name.split('.').pop().toLowerCase();const ico=['png','jpg','jpeg'].includes(ext)?'ðŸ–¼ï¸':['mp3','ogg','wav'].includes(ext)?'ðŸŽµ':ext==='fbx'?'ðŸ“¦':'ðŸ“„';document.getElementById('fchipIco').textContent=ico;document.getElementById('fName').textContent=f.name;document.getElementById('fSize').textContent=fmtBytes(f.size);document.getElementById('fchip').classList.add('show');if(!document.getElementById('assetName').value)document.getElementById('assetName').value=f.name.replace(/\.[^.]+$/,'');const sel=document.getElementById('assetType'),notice=document.getElementById('rbxmNotice');if(['png','jpg','jpeg'].includes(ext)){sel.value='Decal';notice.classList.remove('show');}else if(['mp3','ogg','wav'].includes(ext)){sel.value='Audio';notice.classList.remove('show');}else if(ext==='fbx'){sel.value='MeshPart';notice.classList.remove('show');}else if(ext==='rbxm'){notice.classList.add('show');}else notice.classList.remove('show');}
window.removeFile=function(){selFile=null;document.getElementById('fi').value='';document.getElementById('fchip').classList.remove('show');document.getElementById('rbxmNotice').classList.remove('show');}
window.doUpload=async function(){
  if(!currentUser)return toast('âš  Login dulu!');
  const userId=document.getElementById('userId').value.trim(),apiKey=document.getElementById('apiKey').value.trim(),assetName=document.getElementById('assetName').value.trim(),assetType=document.getElementById('assetType').value;
  if(!userId)return toast('âš  Masukkan User ID!');if(!apiKey)return toast('âš  Masukkan API Key!');if(!selFile)return toast('âš  Pilih file!');if(!assetName)return toast('âš  Masukkan nama asset!');
  if(selFile.name.split('.').pop().toLowerCase()==='rbxm')return toast('âœ• .rbxm tidak bisa via API!');
  const ex=JSON.parse(localStorage.getItem('dev_settings')||'{}');localStorage.setItem('dev_settings',JSON.stringify({...ex,sUserId:userId,sApiKey:apiKey,sDefType:assetType}));
  const userRef=doc(db,'users',currentUser.uid);const snap=await getDoc(userRef);const freshCoins=snap.data()?.coins||0;
  if(freshCoins<=0)return toast('âœ• Coin tidak cukup!');
  const btn=document.getElementById('btnUp');btn.disabled=true;btn.innerHTML='<span class="spinner"></span> Uploading...';showResult('','','');
  try{
    const fd=new FormData();fd.append('request',JSON.stringify({assetType,displayName:assetName,description:'Uploaded via DEV Uploader',creationContext:{creator:{userId}}}));fd.append('fileContent',selFile,selFile.name);
    const res=await fetch('/api/upload',{method:'POST',headers:{'x-api-key':apiKey},body:fd});const data=await res.json();
    if(res.ok){
      await updateDoc(userRef,{coins:increment(-1),totalUploads:increment(1)});currentUserData.coins=freshCoins-1;currentUserData.totalUploads=(currentUserData.totalUploads||0)+1;updateUI();
      const assetId=data.assetId||null,opId=data.operationId||data.path||null;
      await addDoc(collection(db,'uploads'),{uid:currentUser.uid,userEmail:currentUser.email,userName:currentUserData.name,assetName,assetType,assetId:assetId||'Processing',operationId:opId||'',fileName:selFile.name,fileSize:selFile.size,rating:0,createdAt:serverTimestamp()});
      loadHistory();
      showResult('ok','âœ¦ UPLOAD BERHASIL',`<div class="rrow"><span class="rkey">Asset Name</span><span class="rval">${assetName}</span></div><div class="rrow"><span class="rkey">Asset ID</span><span>${assetId?`<span class="rval" onclick="cp('${assetId}')">${assetId}</span>`:'<span class="badge-proc">Processingâ€¦</span>'}</span></div><div class="rrow"><span class="rkey">Insert URL</span><span>${assetId?`<span class="rval" onclick="cp('rbxassetid://${assetId}')">rbxassetid://${assetId}</span>`:'<span style="font-size:10px;color:var(--muted)">Cek Inventory</span>'}</span></div>${opId?`<div class="rrow"><span class="rkey">Operation ID</span><span class="rval" onclick="cp('${opId}')" style="font-size:10px">${opId}</span></div>`:''}`);
      toast('âœ“ Upload berhasil!');
    }else{const msg=data.message||data.error||JSON.stringify(data);showResult('fail','âœ• UPLOAD GAGAL',`<div style="font-family:DM Mono,monospace;font-size:12px;color:rgba(255,68,102,0.8);line-height:1.7">${msg}</div>`);}
  }catch(e){showResult('fail','âœ• CONNECTION ERROR',`<div style="font-family:DM Mono,monospace;font-size:12px;color:rgba(255,68,102,0.8)">${e.message}</div>`);}
  btn.disabled=false;btn.innerHTML='<div class="shim"></div>ðŸš€ &nbsp; UPLOAD SEKARANG';
}

// BULK UPLOAD
let bulkFiles=[];
window.handleBulkFiles=function(inp){const files=Array.from(inp.files);bulkFiles=files.filter(f=>['png','jpg','jpeg','mp3','ogg','wav','fbx'].includes(f.name.split('.').pop().toLowerCase()));renderBulkList();}
function renderBulkList(){const el=document.getElementById('bulkList');if(!bulkFiles.length){el.innerHTML='<div style="text-align:center;padding:18px;font-family:DM Mono,monospace;font-size:11px;color:var(--muted)">Belum ada file</div>';document.getElementById('bulkCoinCost').textContent=0;return;}el.innerHTML=bulkFiles.map((f,i)=>{const ext=f.name.split('.').pop().toLowerCase(),type=['png','jpg','jpeg'].includes(ext)?'Decal':['mp3','ogg','wav'].includes(ext)?'Audio':'MeshPart';return`<div class="bulk-item" id="bitem_${i}"><div class="bulk-item-info"><div class="bulk-name">${f.name}</div><div class="bulk-meta">${fmtBytes(f.size)} Â· ${type}</div></div><div class="bulk-status" id="bstatus_${i}">â³</div><button class="bulk-rm" onclick="removeBulkFile(${i})">âœ•</button></div>`;}).join('');document.getElementById('bulkCoinCost').textContent=bulkFiles.length;}
window.removeBulkFile=function(i){bulkFiles.splice(i,1);renderBulkList();}
window.doBulkUpload=async function(){
  if(!currentUser)return toast('âš  Login dulu!');
  if(!bulkFiles.length)return toast('âš  Pilih file dulu!');
  const userId=document.getElementById('bulkUserId').value.trim(),apiKey=document.getElementById('bulkApiKey').value.trim();
  if(!userId)return toast('âš  Masukkan User ID!');if(!apiKey)return toast('âš  Masukkan API Key!');
  const userRef=doc(db,'users',currentUser.uid);const snap=await getDoc(userRef);const freshCoins=snap.data()?.coins||0;
  if(freshCoins<bulkFiles.length)return toast(`âœ• Coin kurang! Butuh ${bulkFiles.length}, punya ${freshCoins}`);
  const btn=document.getElementById('btnBulk');btn.disabled=true;btn.innerHTML='<span class="spinner"></span> Uploading...';
  let success=0,failed=0;
  for(let i=0;i<bulkFiles.length;i++){
    const f=bulkFiles[i];const statusEl=document.getElementById('bstatus_'+i);const itemEl=document.getElementById('bitem_'+i);
    if(statusEl)statusEl.textContent='ðŸ”„';
    try{
      const ext=f.name.split('.').pop().toLowerCase(),assetType=['png','jpg','jpeg'].includes(ext)?'Decal':['mp3','ogg','wav'].includes(ext)?'Audio':'MeshPart',assetName=f.name.replace(/\.[^.]+$/,'');
      const fd=new FormData();fd.append('request',JSON.stringify({assetType,displayName:assetName,description:'Bulk via DEV Uploader',creationContext:{creator:{userId}}}));fd.append('fileContent',f,f.name);
      const res=await fetch('/api/upload',{method:'POST',headers:{'x-api-key':apiKey},body:fd});const data=await res.json();
      if(res.ok){
        await updateDoc(userRef,{coins:increment(-1),totalUploads:increment(1)});
        await addDoc(collection(db,'uploads'),{uid:currentUser.uid,userEmail:currentUser.email,userName:currentUserData.name,assetName,assetType,assetId:data.assetId||'Processing',fileName:f.name,fileSize:f.size,rating:0,createdAt:serverTimestamp()});
        if(statusEl){statusEl.textContent='âœ“';statusEl.style.color='var(--green)';}if(itemEl)itemEl.style.borderColor='rgba(0,229,160,0.3)';success++;
      }else{if(statusEl){statusEl.textContent='âœ•';statusEl.style.color='var(--red)';}if(itemEl)itemEl.style.borderColor='rgba(255,68,102,0.3)';failed++;}
    }catch(e){if(statusEl){statusEl.textContent='âœ•';statusEl.style.color='var(--red)';}failed++;}
  }
  currentUserData.coins=Math.max(0,(currentUserData.coins||0)-success);currentUserData.totalUploads=(currentUserData.totalUploads||0)+success;updateUI();loadHistory();
  toast(`âœ“ Selesai! ${success} berhasil, ${failed} gagal`);btn.disabled=false;btn.innerHTML='<div class="shim"></div>ðŸ“Ž &nbsp; BULK UPLOAD SEKARANG';
}

// HISTORY
async function loadHistory(){
  if(!currentUser)return;const el=document.getElementById('histList');
  el.innerHTML='<div class="hist-empty"><div class="hist-empty-ico">â³</div></div>';
  try{
    const q=query(collection(db,'uploads'),where('uid','==',currentUser.uid),orderBy('createdAt','desc'),limit(50));
    const snap=await getDocs(q);const items=[];snap.forEach(d=>items.push({id:d.id,...d.data()}));
    document.getElementById('statTotal').textContent=items.length;
    document.getElementById('statSuccess').textContent=items.filter(i=>i.assetId!=='Processing').length;
    document.getElementById('statCoins').textContent=currentUserData.totalUploads||items.length;
    if(!items.length){el.innerHTML='<div class="hist-empty"><div class="hist-empty-ico">â—Ž</div><div class="hist-empty-t">Belum ada history.</div></div>';return;}
    el.innerHTML=items.map(h=>`<div class="hist-item"><div class="hist-item-top"><span class="hist-name">${h.assetName}</span><span class="hist-time">${h.createdAt?.toDate?h.createdAt.toDate().toLocaleString('id-ID'):''}</span></div><div class="hist-id" onclick="cp('${h.assetId}')">ID: ${h.assetId}</div><div class="hist-tags"><span class="hist-tag">${h.assetType}</span><span class="hist-tag">${h.fileName}</span></div><div class="hist-rating"><span style="font-family:'DM Mono',monospace;font-size:9px;color:var(--muted)">RATING:</span>${[1,2,3,4,5].map(s=>`<span class="star ${(h.rating||0)>=s?'active':''}" onclick="rateUpload('${h.id}',${s})">â˜…</span>`).join('')}</div></div>`).join('');
  }catch(e){el.innerHTML='<div class="hist-empty"><div class="hist-empty-t">Gagal memuat.</div></div>';}
}
window.rateUpload=async function(docId,stars){try{await updateDoc(doc(db,'uploads',docId),{rating:stars});toast('âœ“ Rating: '+'â˜…'.repeat(stars));loadHistory();}catch(e){}}

// DASHBOARD
async function loadDashboard(){
  try{
    const q=query(collection(db,'uploads'),where('uid','==',currentUser.uid),orderBy('createdAt','desc'),limit(50));
    const snap=await getDocs(q);const items=[];snap.forEach(d=>items.push(d.data()));
    const types={};items.forEach(i=>{types[i.assetType]=(types[i.assetType]||0)+1;});
    const days={};const now=new Date();for(let i=6;i>=0;i--){const d=new Date(now);d.setDate(d.getDate()-i);days[d.toLocaleDateString('id-ID',{weekday:'short'})]=0;}
    items.forEach(i=>{if(!i.createdAt?.toDate)return;const d=i.createdAt.toDate().toLocaleDateString('id-ID',{weekday:'short'});if(days[d]!==undefined)days[d]++;});
    const maxVal=Math.max(...Object.values(days),1);
    document.getElementById('barChart').innerHTML=Object.entries(days).map(([day,val])=>`<div class="bar-col"><div class="bar-wrap"><div class="bar-fill" style="height:${(val/maxVal)*100}%">${val>0?`<span class="bar-val">${val}</span>`:''}</div></div><div class="bar-label">${day}</div></div>`).join('');
    document.getElementById('typeBreakdown').innerHTML=Object.entries(types).length?Object.entries(types).map(([t,c])=>`<div class="type-row"><span class="type-dot" style="background:${t==='Decal'?'var(--teal)':t==='Audio'?'var(--gold)':'var(--purple)'}"></span><span class="type-name">${t}</span><span class="type-count">${c}</span></div>`).join(''):'<div style="font-family:DM Mono,monospace;font-size:11px;color:var(--muted)">Belum ada data</div>';
    const rated=items.filter(i=>i.rating>0);
    document.getElementById('dashAvgRating').textContent=rated.length?(rated.reduce((a,b)=>a+(b.rating||0),0)/rated.length).toFixed(1):'â€”';
    document.getElementById('dashTotalUploads').textContent=items.length;
    document.getElementById('dashThisWeek').textContent=Object.values(days).reduce((a,b)=>a+b,0);
    document.getElementById('dashRatedCount').textContent=rated.length;
  }catch(e){}
}

// LEADERBOARD
async function loadLeaderboard(){
  const el=document.getElementById('leaderList');el.innerHTML='<div class="hist-empty"><div class="hist-empty-ico">â³</div></div>';
  try{
    const q=query(collection(db,'users'),orderBy('totalUploads','desc'),limit(20));const snap=await getDocs(q);const users=[];snap.forEach(d=>users.push(d.data()));
    if(!users.length){el.innerHTML='<div class="hist-empty"><div class="hist-empty-t">Belum ada data.</div></div>';return;}
    const medals=['ðŸ¥‡','ðŸ¥ˆ','ðŸ¥‰'];
    el.innerHTML=users.map((u,i)=>`<div class="leader-row ${u.uid===currentUser?.uid?'me':''}"><div class="leader-rank">${medals[i]||`<span style="font-family:'Bebas Neue';font-size:16px;color:var(--muted)">${i+1}</span>`}</div><div class="leader-avatar">${u.avatarEmoji||'âš¡'}</div><div class="leader-info"><div class="leader-name">${u.name||'User'} ${u.uid===currentUser?.uid?'<span class="badge-me">KAMU</span>':''}</div><div class="leader-sub">âœ¦ ${u.coins||0} Coins Â· ðŸ‘¥ ${u.referralCount||0} Ref</div></div><div class="leader-uploads"><div class="leader-num">${u.totalUploads||0}</div><div class="leader-lbl">UPLOAD</div></div></div>`).join('');
  }catch(e){el.innerHTML='<div class="hist-empty"><div class="hist-empty-t">Gagal.</div></div>';}
}

// TICKET
window.sendTicket=async function(){
  if(!currentUser)return;const subject=document.getElementById('ticketSubject').value.trim(),msg=document.getElementById('ticketMsg').value.trim(),type=document.getElementById('ticketType').value;
  if(!subject||!msg)return toast('âš  Isi semua field!');
  const btn=document.getElementById('btnTicket');btn.disabled=true;btn.textContent='Mengirim...';
  try{await addDoc(collection(db,'tickets'),{uid:currentUser.uid,userEmail:currentUser.email,userName:currentUserData.name,subject,message:msg,type,status:'open',createdAt:serverTimestamp()});document.getElementById('ticketSubject').value='';document.getElementById('ticketMsg').value='';toast('âœ“ Ticket terkirim!');loadMyTickets();}catch(e){toast('âš  Gagal');}
  btn.disabled=false;btn.textContent='ðŸ“¨  KIRIM TICKET';
}
async function loadMyTickets(){
  if(!currentUser)return;const el=document.getElementById('myTicketList');
  el.innerHTML='<div style="text-align:center;padding:16px;font-family:DM Mono,monospace;font-size:11px;color:var(--muted)">Memuat...</div>';
  try{
    const q=query(collection(db,'tickets'),where('uid','==',currentUser.uid),orderBy('createdAt','desc'),limit(20));const snap=await getDocs(q);const tickets=[];snap.forEach(d=>tickets.push({id:d.id,...d.data()}));
    if(!tickets.length){el.innerHTML='<div style="text-align:center;padding:16px;font-family:DM Mono,monospace;font-size:11px;color:var(--muted)">Belum ada ticket.</div>';return;}
    el.innerHTML=tickets.map(t=>`<div class="ticket-row"><div class="ticket-top"><div><div class="ticket-subject">${t.subject}</div><div class="ticket-meta">${t.type} Â· ${t.createdAt?.toDate?t.createdAt.toDate().toLocaleString('id-ID'):''}</div></div><div class="ticket-status ${t.status}">${t.status==='open'?'â³ OPEN':t.status==='replied'?'ðŸ’¬ REPLIED':'âœ“ CLOSED'}</div></div><div class="ticket-msg">${t.message}</div>${t.adminReply?`<div class="ticket-reply"><span class="ticket-reply-label">ðŸ‘‘ Admin:</span> ${t.adminReply}</div>`:''}</div>`).join('');
  }catch(e){}
}

// TOPUP
let pendingPkg=null,selectedBank=null;
window.openPayment=function(c,p){pendingPkg={coins:c,price:p};selectedBank=null;document.getElementById('modalInner').innerHTML=`<div class="modal-title">Konfirmasi Topup</div><div class="modal-sub">Pilih metode pembayaran</div><div class="modal-order"><div class="modal-order-left"><div class="label">Paket</div><div class="val">${c} Coins</div></div><div class="modal-order-right"><div class="label">Total</div><div class="val">${p}</div></div></div><div class="bank-cards"><div class="bank-card" onclick="selBank(this,'BCA','123 4567 890','ADMIN DEV')"><div class="bank-logo bca">BCA</div><div class="bank-info"><div class="bank-name">Bank BCA</div><div class="bank-num">123 4567 890</div><div class="bank-holder">a.n. ADMIN DEV</div></div><div class="bank-radio"></div></div><div class="bank-card" onclick="selBank(this,'DANA','0877-2903-5761','ADMIN DEV')"><div class="bank-logo dana">DANA</div><div class="bank-info"><div class="bank-name">DANA</div><div class="bank-num">0877-2903-5761</div><div class="bank-holder">ADMIN DEV</div></div><div class="bank-radio"></div></div><div class="bank-card" onclick="selBank(this,'OVO','0877-2903-5761','ADMIN DEV')"><div class="bank-logo ovo">OVO</div><div class="bank-info"><div class="bank-name">OVO</div><div class="bank-num">0877-2903-5761</div><div class="bank-holder">ADMIN DEV</div></div><div class="bank-radio"></div></div></div><div class="modal-note">Setelah transfer, chat Admin WA. Coin aktif dalam <strong>1Ã—24 jam</strong>.</div><button class="btn-confirm" onclick="confirmPay()"><div class="shim"></div>KONFIRMASI</button>`;document.getElementById('modalBg').classList.add('show');}
window.selBank=function(el,bank,num,holder){document.querySelectorAll('.bank-card').forEach(b=>b.classList.remove('selected'));el.classList.add('selected');selectedBank={bank,num,holder};}
window.confirmPay=async function(){
  if(!selectedBank)return toast('âš  Pilih metode dulu!');
  const orderId='DEV-'+Date.now().toString(36).toUpperCase();
  try{await addDoc(collection(db,'orders'),{uid:currentUser.uid,userEmail:currentUser.email,userName:currentUserData.name,orderId,coins:pendingPkg.coins,price:pendingPkg.price,method:selectedBank.bank,status:'pending',createdAt:serverTimestamp()});}catch(e){}
  const waMsg=encodeURIComponent(`Halo Admin DEV! ðŸ‘‹\n\nKonfirmasi topup:\nâ”â”â”â”â”â”â”â”â”â”â”\nðŸ‘¤ ${currentUserData.name}\nðŸ“§ ${currentUser.email}\nðŸ“¦ ${pendingPkg.coins} Coins\nðŸ’° ${pendingPkg.price}\nðŸ¦ ${selectedBank.bank} (${selectedBank.num})\nðŸ†” ${orderId}\nâ”â”â”â”â”â”â”â”â”â”â”\nBukti terlampir ðŸ™`);
  document.getElementById('modalInner').innerHTML=`<div class="success-modal"><div class="success-icon">âœ“</div><div class="success-title">Order Dibuat!</div><div class="success-text">Transfer <strong style="color:var(--gold)">${pendingPkg.price}</strong> ke <strong style="color:var(--teal)">${selectedBank.bank}</strong><br>No: <strong style="color:var(--gold2)">${selectedBank.num}</strong></div><div class="order-id" onclick="cp('${orderId}')">ðŸ†” ${orderId}</div><a href="https://wa.me/${ADMIN_WA}?text=${waMsg}" target="_blank" style="display:block;text-decoration:none;margin:12px 0 8px"><button class="btn-confirm" style="background:linear-gradient(135deg,#25d366,#128c7e)"><div class="shim"></div>ðŸ’¬ CHAT ADMIN WA</button></a><button class="btn-confirm" onclick="closeModal()" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);color:var(--muted2);box-shadow:none">Tutup</button></div>`;
  toast('âœ“ Order: '+orderId);
}
window.closeModal=function(){document.getElementById('modalBg').classList.remove('show');}

// ADMIN
async function loadAdminData(){
  document.getElementById('adminLoading').style.display='block';document.getElementById('adminContent').style.display='none';
  try{
    const usersSnap=await getDocs(collection(db,'users'));const users=[];usersSnap.forEach(d=>users.push({id:d.id,...d.data()}));
    const ordersSnap=await getDocs(query(collection(db,'orders'),orderBy('createdAt','desc'),limit(100)));const orders=[];ordersSnap.forEach(d=>orders.push({id:d.id,...d.data()}));
    const uploadsSnap=await getDocs(query(collection(db,'uploads'),orderBy('createdAt','desc'),limit(50)));const uploads=[];uploadsSnap.forEach(d=>uploads.push({id:d.id,...d.data()}));
    const ticketsSnap=await getDocs(query(collection(db,'tickets'),orderBy('createdAt','desc'),limit(50)));const tickets=[];ticketsSnap.forEach(d=>tickets.push({id:d.id,...d.data()}));
    const promosSnap=await getDocs(collection(db,'promos'));const promos=[];promosSnap.forEach(d=>promos.push({id:d.id,...d.data()}));

    document.getElementById('adminStatUsers').textContent=users.length;
    document.getElementById('adminStatOrders').textContent=orders.length;
    document.getElementById('adminStatUploads').textContent=uploads.length;
    document.getElementById('adminStatPending').textContent=orders.filter(o=>o.status==='pending').length;
    document.getElementById('adminStatTickets').textContent=tickets.filter(t=>t.status==='open').length;
    const confirmed=orders.filter(o=>o.status==='confirmed');
    const revenue=confirmed.reduce((a,o)=>{const p=parseInt((o.price||'0').replace(/\D/g,''));return a+(isNaN(p)?0:p);},0);
    document.getElementById('adminStatRevenue').textContent='Rp '+revenue.toLocaleString('id-ID');

    // Revenue chart
    const mrev={};confirmed.forEach(o=>{if(!o.createdAt?.toDate)return;const m=o.createdAt.toDate().toLocaleDateString('id-ID',{month:'short'});const p=parseInt((o.price||'0').replace(/\D/g,''));mrev[m]=(mrev[m]||0)+(isNaN(p)?0:p);});
    const maxRev=Math.max(...Object.values(mrev),1);
    document.getElementById('revenueChart').innerHTML=Object.entries(mrev).slice(-6).map(([m,v])=>`<div class="bar-col"><div class="bar-wrap"><div class="bar-fill" style="height:${(v/maxRev)*100}%;background:linear-gradient(180deg,var(--green),var(--teal))">${v>0?`<span class="bar-val" style="font-size:8px">Rp${(v/1000).toFixed(0)}k</span>`:''}</div></div><div class="bar-label">${m}</div></div>`).join('')||'<div style="color:var(--muted);font-size:11px;font-family:DM Mono,monospace;padding:16px;text-align:center">Belum ada data</div>';

    // Users
    document.getElementById('adminUserList').innerHTML=users.map(u=>`<div class="admin-user-card ${u.isBanned?'banned':''}"><div class="admin-user-top"><div class="admin-user-avatar">${u.avatarEmoji||'âš¡'}</div><div class="admin-user-info"><div class="admin-user-name">${u.name||'Unknown'} ${u.isAdmin?'<span class="badge-admin">ADMIN</span>':''} ${u.isBanned?'<span class="badge-banned">BANNED</span>':''}</div><div class="admin-user-email">${u.email}</div>${u.waNumber?`<div style="font-family:'DM Mono',monospace;font-size:9px;color:var(--green)">ðŸ“± +${u.waNumber}</div>`:''}<div style="font-family:'DM Mono',monospace;font-size:9px;color:var(--muted)">ðŸ‘¥ Ref: ${u.referralCount||0} Â· ðŸ“¤ ${u.totalUploads||0}</div></div><div class="admin-user-coins"><span class="coins-display">âœ¦ ${u.coins||0}</span></div></div><div class="admin-user-actions"><input class="finput" type="number" id="coinInp_${u.id}" placeholder="Jumlah" style="flex:1;padding:7px 10px;font-size:12px"><button class="btn-add-coin" onclick="addCoins('${u.id}','${u.name}','${u.waNumber||''}')">+ Add</button><button class="btn-sub-coin" onclick="subCoins('${u.id}','${u.name}')">- Sub</button><button class="btn-set-coin" onclick="setCoins('${u.id}','${u.name}')">Set</button>${!u.isAdmin?`<button class="${u.isBanned?'btn-add-coin':'btn-sub-coin'}" onclick="toggleBan('${u.id}','${u.name}',${!!u.isBanned})">${u.isBanned?'âœ“ Unban':'ðŸš« Ban'}</button>`:''}</div></div>`).join('');

    // Orders
    document.getElementById('adminOrderList').innerHTML=orders.length?orders.map(o=>`<div class="admin-order-card ${o.status}"><div class="admin-order-top"><div><div class="admin-order-id">${o.orderId}</div><div class="admin-order-user">${o.userName} Â· ${o.userEmail}</div></div><div class="admin-order-status ${o.status}">${o.status==='pending'?'â³ PENDING':'âœ“ CONFIRMED'}</div></div><div class="admin-order-detail">${o.coins} Coins Â· ${o.price} Â· ${o.method}<br><span style="font-size:9px;color:var(--muted)">${o.createdAt?.toDate?o.createdAt.toDate().toLocaleString('id-ID'):''}</span></div>${o.status==='pending'?`<button class="btn-confirm-order" onclick="confirmOrder('${o.id}','${o.uid}',${o.coins},'${o.orderId}')">âœ“ Konfirmasi & Tambah Coin</button>`:''}</div>`).join(''):'<div style="text-align:center;padding:20px;color:var(--muted);font-family:DM Mono,monospace;font-size:11px">Belum ada order</div>';

    // Tickets
    document.getElementById('adminTicketList').innerHTML=tickets.length?tickets.map(t=>`<div class="admin-order-card ${t.status==='open'?'pending':'confirmed'}"><div class="admin-order-top"><div><div class="admin-order-id">ðŸŽ« ${t.subject}</div><div class="admin-order-user">${t.userName} Â· ${t.type}</div></div><div class="admin-order-status ${t.status==='open'?'pending':'confirmed'}">${t.status==='open'?'â³ OPEN':t.status==='replied'?'ðŸ’¬ REPLIED':'âœ“ CLOSED'}</div></div><div class="admin-order-detail" style="font-size:11px">${t.message}</div>${t.status!=='closed'?`<div style="display:flex;gap:7px;margin-top:7px"><input class="finput" id="reply_${t.id}" placeholder="Balas..." style="flex:1;padding:8px 11px;font-size:12px"><button class="btn-confirm-order" style="white-space:nowrap" onclick="replyTicket('${t.id}','${t.uid}')">Kirim</button><button class="btn-set-coin" onclick="closeTicket('${t.id}')">Tutup</button></div>`:''}${t.adminReply?`<div class="ticket-reply" style="margin-top:7px"><span class="ticket-reply-label">ðŸ‘‘ Admin:</span> ${t.adminReply}</div>`:''}</div>`).join(''):'<div style="text-align:center;padding:20px;color:var(--muted);font-family:DM Mono,monospace;font-size:11px">Belum ada ticket</div>';

    // Promos
    document.getElementById('promoList').innerHTML=promos.length?promos.map(p=>`<div class="admin-order-card ${p.active?'confirmed':''}"><div class="admin-order-top"><div><div class="admin-order-id">ðŸŽŸï¸ ${p.code}</div><div class="admin-order-user">+${p.coinBonus} Coins Â· ${p.usedCount||0}/${p.maxUses||'âˆž'} dipakai</div></div><div class="admin-order-status ${p.active?'confirmed':'pending'}">${p.active?'âœ“ AKTIF':'âœ• MATI'}</div></div><button class="${p.active?'btn-sub-coin':'btn-add-coin'}" style="width:100%;margin-top:8px" onclick="togglePromo('${p.id}',${!!p.active})">${p.active?'Nonaktifkan':'Aktifkan'}</button></div>`).join(''):'<div style="text-align:center;padding:12px;color:var(--muted);font-family:DM Mono,monospace;font-size:11px">Belum ada promo</div>';

    // Uploads
    document.getElementById('adminUploadList').innerHTML=uploads.length?uploads.map(u=>`<div class="hist-item" style="margin-bottom:7px"><div class="hist-item-top"><span class="hist-name">${u.assetName}</span><span class="hist-time">${u.createdAt?.toDate?u.createdAt.toDate().toLocaleString('id-ID'):''}</span></div><div style="font-family:DM Mono,monospace;font-size:9px;color:var(--muted2);margin-bottom:4px">${u.userName} Â· ${u.userEmail}</div><div class="hist-id" onclick="cp('${u.assetId}')">ID: ${u.assetId}</div><div class="hist-tags"><span class="hist-tag">${u.assetType}</span>${u.rating?`<span class="hist-tag" style="color:var(--gold)">${'â˜…'.repeat(u.rating)}</span>`:''}</div></div>`).join(''):'<div style="text-align:center;padding:20px;color:var(--muted);font-family:DM Mono,monospace;font-size:11px">Belum ada upload</div>';
  }catch(e){console.error(e);}
  document.getElementById('adminLoading').style.display='none';document.getElementById('adminContent').style.display='block';
}

window.addCoins=async function(uid,name,waNumber){
  const val=parseInt(document.getElementById('coinInp_'+uid).value);if(!val||val<=0)return toast('âš  Masukkan jumlah!');
  await updateDoc(doc(db,'users',uid),{coins:increment(val)});
  await addDoc(collection(db,'notifications'),{uid,title:'âœ¦ Coin Masuk!',message:`+${val} Coin telah ditambahkan`,icon:'âœ¦',read:false,createdAt:serverTimestamp()});
  toast(`âœ“ +${val} â†’ ${name}`);
  if(waNumber){const waMsg=encodeURIComponent(`ðŸ”” *DEV Uploader*\n\nHai ${name}! âœ¦ *${val} Coin* masuk!\nCek: devv-uploader.vercel.app ðŸš€`);window.open(`https://wa.me/${waNumber}?text=${waMsg}`,'_blank');}
  loadAdminData();
}
window.subCoins=async function(uid,name){const val=parseInt(document.getElementById('coinInp_'+uid).value);if(!val||val<=0)return toast('âš  Masukkan jumlah!');await updateDoc(doc(db,'users',uid),{coins:increment(-val)});toast(`âœ“ -${val} dari ${name}`);loadAdminData();}
window.setCoins=async function(uid,name){const val=parseInt(document.getElementById('coinInp_'+uid).value);if(isNaN(val))return toast('âš  Masukkan jumlah!');await updateDoc(doc(db,'users',uid),{coins:val});toast(`âœ“ Coin ${name} = ${val}`);loadAdminData();}
window.toggleBan=async function(uid,name,isBanned){if(!confirm(`${isBanned?'Unban':'Ban'} user ${name}?`))return;await updateDoc(doc(db,'users',uid),{isBanned:!isBanned});if(!isBanned)await addDoc(collection(db,'notifications'),{uid,title:'ðŸš« Akun Disuspend',message:'Akun kamu disuspend oleh admin.',icon:'ðŸš«',read:false,createdAt:serverTimestamp()});toast(`âœ“ ${isBanned?'Unban':'Ban'}: ${name}`);loadAdminData();}
window.confirmOrder=async function(orderId,uid,coins,orderCode){
  if(!confirm(`Konfirmasi ${orderCode} & +${coins} coins?`))return;
  await updateDoc(doc(db,'orders',orderId),{status:'confirmed',confirmedAt:serverTimestamp()});
  await updateDoc(doc(db,'users',uid),{coins:increment(coins)});
  await addDoc(collection(db,'notifications'),{uid,title:'âœ¦ Topup Dikonfirmasi!',message:`+${coins} Coin dari order ${orderCode}`,icon:'âœ¦',read:false,createdAt:serverTimestamp()});
  const userSnap=await getDoc(doc(db,'users',uid));const ud=userSnap.data();
  if(ud?.waNumber){const waMsg=encodeURIComponent(`ðŸ”” *DEV Uploader*\n\nHai ${ud.name}! âœ¦ *${coins} Coin* masuk!\nOrder: ${orderCode}\nCek: devv-uploader.vercel.app ðŸš€`);window.open(`https://wa.me/${ud.waNumber}?text=${waMsg}`,'_blank');}
  toast(`âœ“ +${coins} Coins!`);loadAdminData();
}
window.replyTicket=async function(ticketId,userUid){
  const reply=document.getElementById('reply_'+ticketId)?.value?.trim();if(!reply)return toast('âš  Ketik balasan!');
  await updateDoc(doc(db,'tickets',ticketId),{status:'replied',adminReply:reply,repliedAt:serverTimestamp()});
  await addDoc(collection(db,'notifications'),{uid:userUid,title:'ðŸ’¬ Ticket Dibalas!',message:reply.slice(0,80),icon:'ðŸ’¬',read:false,createdAt:serverTimestamp()});
  const us=await getDoc(doc(db,'users',userUid));const uwa=us.data()?.waNumber;
  if(uwa){const waMsg=encodeURIComponent(`ðŸ’¬ *Balas Ticket DEV Uploader*\n\n${reply}`);window.open(`https://wa.me/${uwa}?text=${waMsg}`,'_blank');}
  toast('âœ“ Balasan terkirim!');loadAdminData();
}
window.closeTicket=async function(id){await updateDoc(doc(db,'tickets',id),{status:'closed'});toast('âœ“ Ticket ditutup');loadAdminData();}
window.sendBroadcast=async function(){
  const title=document.getElementById('broadTitle').value.trim(),msg=document.getElementById('broadMsg').value.trim(),icon=document.getElementById('broadIcon').value||'ðŸ“¢';
  if(!title||!msg)return toast('âš  Isi title dan pesan!');if(!confirm('Broadcast ke semua user?'))return;
  const btn=document.getElementById('btnBroadcast');btn.disabled=true;btn.textContent='Mengirim...';
  try{const us=await getDocs(collection(db,'users'));const batch=writeBatch(db);us.docs.forEach(d=>{if(d.data().email===ADMIN_EMAIL)return;const ref=doc(collection(db,'notifications'));batch.set(ref,{uid:d.id,title,message:msg,icon,read:false,createdAt:serverTimestamp()});});await batch.commit();document.getElementById('broadTitle').value='';document.getElementById('broadMsg').value='';toast(`âœ“ Broadcast ke ${us.size} user!`);}catch(e){toast('âš  Gagal: '+e.message);}
  btn.disabled=false;btn.textContent='ðŸ“¢ KIRIM BROADCAST';
}
window.createPromo=async function(){
  const code=document.getElementById('promoCode').value.trim().toUpperCase(),bonus=parseInt(document.getElementById('promoBonusCoin').value),maxUses=parseInt(document.getElementById('promoMaxUses').value)||null;
  if(!code)return toast('âš  Masukkan kode!');if(!bonus||bonus<=0)return toast('âš  Masukkan bonus!');
  try{await addDoc(collection(db,'promos'),{code,coinBonus:bonus,maxUses,usedCount:0,active:true,createdAt:serverTimestamp()});document.getElementById('promoCode').value='';document.getElementById('promoBonusCoin').value='';document.getElementById('promoMaxUses').value='';toast(`âœ“ Promo ${code} dibuat!`);loadAdminData();}catch(e){toast('âš  Gagal: '+e.message);}
}
window.togglePromo=async function(id,active){await updateDoc(doc(db,'promos',id),{active:!active});toast(`âœ“ Promo ${active?'dinonaktifkan':'diaktifkan'}`);loadAdminData();}

// UTILS
window.cp=function(text){navigator.clipboard.writeText(text).then(()=>toast('âœ“ Copied!'));}
window.toast=function(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2800);}
function showResult(type,hdr,body){const el=document.getElementById('result');if(!type){el.className='result';return;}el.className='result show '+type;document.getElementById('resultHdr').innerHTML=hdr;document.getElementById('resultBody').innerHTML=body;}
function fmtBytes(b){if(b<1024)return b+' B';if(b<1048576)return(b/1024).toFixed(1)+' KB';return(b/1048576).toFixed(1)+' MB';}
window.doRegister=async function(){const name=document.getElementById('regName').value.trim(),email=document.getElementById('regEmail').value.trim(),pass=document.getElementById('regPass').value,pass2=document.getElementById('regPass2').value;if(!name||!email||!pass)return showAuthErr('Semua field harus diisi!');if(pass!==pass2)return showAuthErr('Password tidak sama!');if(pass.length<6)return showAuthErr('Password minimal 6 karakter!');document.getElementById('btnRegister').disabled=true;try{const c=await createUserWithEmailAndPassword(auth,email,pass);await updateProfile(c.user,{displayName:name});}catch(e){showAuthErr(getAuthError(e.code));}document.getElementById('btnRegister').disabled=false;}
window.doLogin=async function(){const email=document.getElementById('loginEmail').value.trim(),pass=document.getElementById('loginPass').value;if(!email||!pass)return showAuthErr('Isi email dan password!');document.getElementById('btnLogin').disabled=true;try{await signInWithEmailAndPassword(auth,email,pass);}catch(e){showAuthErr(getAuthError(e.code));}document.getElementById('btnLogin').disabled=false;}
window.doGoogle=async function(){try{await signInWithPopup(auth,googleProvider);}catch(e){showAuthErr('Login Google gagal');}}
window.doLogout=async function(){if(!confirm('Yakin mau logout?'))return;await signOut(auth);}
function getAuthError(code){const m={'auth/email-already-in-use':'Email sudah terdaftar!','auth/invalid-email':'Format email tidak valid!','auth/weak-password':'Password minimal 6 karakter!','auth/user-not-found':'Email tidak ditemukan!','auth/wrong-password':'Password salah!','auth/invalid-credential':'Email atau password salah!','auth/too-many-requests':'Terlalu banyak percobaan!'};return m[code]||'Error: '+code;}
function showAuthErr(msg){const el=document.getElementById('authErr');el.textContent=msg;el.style.display='block';setTimeout(()=>el.style.display='none',4000);}
window.switchTab=function(btn,panel){document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));btn.classList.add('active');document.getElementById('panel-'+panel).classList.add('active');moveSlider(btn);if(panel==='history')loadHistory();if(panel==='settings')loadSettings();if(panel==='dashboard')loadDashboard();if(panel==='leaderboard')loadLeaderboard();if(panel==='support')loadMyTickets();if(panel==='notif')loadNotifications();}
function moveSlider(btn){const tabs=document.getElementById('tabs'),slider=document.getElementById('tabSlider');if(!tabs||!slider)return;const tr=tabs.getBoundingClientRect(),br=btn.getBoundingClientRect();slider.style.left=(br.left-tr.left-4)+'px';slider.style.width=br.width+'px';}
setTimeout(()=>{const a=document.querySelector('.tab-btn.active');if(a)moveSlider(a);},200);
window.switchAuthTab=function(tab){document.querySelectorAll('.auth-tab').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.auth-form').forEach(f=>f.classList.remove('active'));event.target.classList.add('active');document.getElementById('form-'+tab).classList.add('active');document.getElementById('authErr').style.display='none';}
window.goAdmin=function(){showAdmin();}
window.goApp=function(){showApp();}

// Show referral hint if came from ref link
const urlP=new URLSearchParams(window.location.search);
if(urlP.get('ref')){const hint=document.getElementById('refHint');if(hint)hint.style.display='block';}

// Drag and drop
const dzEl=document.getElementById('dz');
if(dzEl){dzEl.addEventListener('dragover',e=>{e.preventDefault();dzEl.classList.add('over');});dzEl.addEventListener('dragleave',()=>dzEl.classList.remove('over'));dzEl.addEventListener('drop',e=>{e.preventDefault();dzEl.classList.remove('over');const f=e.dataTransfer.files[0];if(!f)return;const dt=new DataTransfer();dt.items.add(f);document.getElementById('fi').files=dt.files;window.handleFile(document.getElementById('fi'));});}

// CANVAS
let canvasRunning=false,animFrame;
function startCanvas(){if(canvasRunning)return;canvasRunning=true;const cv=document.getElementById('c');if(!cv)return;const cx=cv.getContext('2d');let W,H;function resize(){W=cv.width=innerWidth;H=cv.height=innerHeight;}resize();addEventListener('resize',resize);const pts=Array.from({length:80},()=>({x:Math.random()*1400,y:Math.random()*900,vx:(Math.random()-.5)*.2,vy:-(Math.random()*.3+.04),r:Math.random()*1.2+.2,a:Math.random()*.3+.05,c:Math.random()>.65?'#c9a84c':Math.random()>.5?'#00e5c8':'#fff',life:Math.random(),decay:Math.random()*.001+.0004}));const orbs=[{bx:.15,by:.35,cr:'rgba(201,168,76,0.07)',t:0,s:80},{bx:.85,by:.65,cr:'rgba(0,229,200,0.05)',t:2,s:70}];let ot=0;function draw(){if(!canvasRunning)return;cx.clearRect(0,0,W,H);ot+=.003;orbs.forEach(o=>{const ox=o.bx*W+Math.sin(ot+o.t)*o.s,oy=o.by*H+Math.cos(ot*.7+o.t)*50;const rg=cx.createRadialGradient(ox,oy,0,ox,oy,.35*Math.min(W,H));rg.addColorStop(0,o.cr);rg.addColorStop(1,'transparent');cx.fillStyle=rg;cx.fillRect(0,0,W,H);});pts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.life-=p.decay;if(p.life<=0||p.y<-10){p.x=Math.random()*W;p.y=H+10;p.life=1;}cx.save();cx.globalAlpha=p.a*p.life;cx.fillStyle=p.c;cx.shadowColor=p.c;cx.shadowBlur=5;cx.beginPath();cx.arc(p.x,p.y,p.r,0,Math.PI*2);cx.fill();cx.restore();});animFrame=requestAnimationFrame(draw);}draw();}
function stopCanvas(){canvasRunning=false;if(animFrame)cancelAnimationFrame(animFrame);}
</script>
</body>
</html>
